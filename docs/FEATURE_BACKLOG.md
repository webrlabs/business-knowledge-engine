# Feature Backlog: SOTA GraphRAG Implementation

> Generated from SOTA Gap Analysis - January 2026
>
> This document captures all features needed to achieve state-of-the-art GraphRAG capabilities.
> Use this as a reference for sprint planning and progress tracking.

---

## Feature Status Legend

| Status | Meaning |
|--------|---------|
| ðŸ”´ Not Started | Feature not yet implemented |
| ðŸŸ¡ In Progress | Feature currently being developed |
| ðŸŸ¢ Complete | Feature fully implemented and tested |
| âšª Deferred | Feature postponed to future phase |

---

## Phase 1: Evaluation Foundation

**Goal:** Establish measurement capability before making changes
**Priority:** P0 - Critical
**Estimated Duration:** 2-3 weeks

### 1.1 Evaluation Dataset Creation

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F1.1.1 | Q&A Benchmark Dataset | Create 50+ curated question-answer pairs covering operational, technical, compliance, and leadership questions | ðŸŸ¢ Complete | `/backend/src/evaluation/datasets/qa_benchmark.json` - 52 Q&A pairs across 4 categories (operational/technical/compliance/leadership); persona tags; expected entities; source docs; retrieval queries; entity/relationship extraction ground truth; community summaries; Dataset validator at `dataset-validator.js`; 49 unit tests |
| F1.1.2 | Entity Ground Truth | Annotated dataset of correct entity extractions from sample documents | ðŸŸ¢ Complete | `/backend/src/evaluation/datasets/entity_ground_truth.json` - 25 sample documents with 322 annotated entities covering all 18 entity types; 5 categories (operational/technical/compliance/leadership/mixed); 3 complexity levels (simple/medium/complex); spans link entities to source text; statistics tracking; integrates with entity-extraction-evaluator.js; 46 unit tests |
| F1.1.3 | Relationship Ground Truth | Annotated dataset of correct relationships from sample documents | ðŸŸ¢ Complete | `/backend/src/evaluation/datasets/relationship_ground_truth.json` - 25 sample documents with 270 annotated relationships covering all 16 relationship types; 5 categories (operational/technical/compliance/leadership/mixed); 3 complexity levels (simple/medium/complex); spans link relationships to source text; statistics tracking; integrates with relationship-extraction-evaluator.js; 57 unit tests |
| F1.1.4 | Negative Test Cases | Questions that should return "insufficient information" or "not found" | ðŸŸ¢ Complete | `/backend/src/evaluation/datasets/negative_tests.json` - 45 test cases across 7 categories (nonexistent_entity, out_of_scope, temporal_gap, fictional, specificity_trap, cross_domain, counterfactual); NegativeTestEvaluator at `negative-test-evaluator.js` with heuristic + LLM classification, refusal pattern detection, hallucination pattern checking, batch evaluation, text/markdown report generation; Integrated into benchmark runner as `negative-tests` suite; 30 unit tests |
| F1.1.5 | Persona-Tagged Questions | Tag each Q&A with target persona (Ops, IT, Compliance, Leadership) | ðŸŸ¢ Complete | Integrated into F1.1.1 - All 52 Q&A pairs tagged with persona (Ops/IT/Compliance/Leadership); 15 retrieval queries also tagged; enables persona-specific evaluation |

### 1.2 Evaluation Metrics Pipeline

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F1.2.1 | Retrieval Metrics Service | Implement Recall@K, Precision@K, MRR, NDCG calculations | ðŸŸ¢ Complete | `/backend/src/evaluation/metrics.js` |
| F1.2.2 | Citation Accuracy Checker | Verify citations in answers match actual source content | ðŸŸ¢ Complete | `/backend/src/evaluation/citation-accuracy.js` - Multi-method verification with text matching + LLM |
| F1.2.3 | Grounding Score Calculator | Measure how well answers are grounded in retrieved context | ðŸŸ¢ Complete | `/backend/src/evaluation/grounding-score.js` - Claim-based verification with LLM |
| F1.2.4 | LLM-as-Judge Evaluator | Use GPT-4 with rubrics to score helpfulness, accuracy, completeness | ðŸŸ¢ Complete | `/backend/src/evaluation/llm-judge.js` |
| F1.2.5 | Entity Extraction Evaluator | Compare extracted entities against ground truth (F1, precision, recall) | ðŸŸ¢ Complete | `/backend/src/evaluation/entity-extraction-evaluator.js` - Strict/partial/type-only matching, per-type metrics, batch evaluation |
| F1.2.6 | Relationship Extraction Evaluator | Compare extracted relationships against ground truth | ðŸŸ¢ Complete | `/backend/src/evaluation/relationship-extraction-evaluator.js` - Strict/partial/direction-agnostic/type-only matching, direction accuracy tracking, per-type metrics, batch evaluation |

### 1.3 Benchmark Infrastructure

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F1.3.1 | Benchmark Runner Script | CLI tool to run full evaluation suite against current system | ðŸŸ¢ Complete | `/backend/src/evaluation/run-benchmark.js` - CLI with 6 suites, JSON/text/markdown output, CI/CD threshold checks |
| F1.3.2 | Results Storage | Store evaluation results with timestamps for trend analysis | ðŸŸ¢ Complete | `/backend/src/evaluation/results-storage-service.js` - Cosmos DB + local JSON fallback, trend analysis, baseline comparison, regression detection; API: `/api/evaluation/*` |
| F1.3.3 | Baseline Documentation | Document initial baseline metrics for all measures | ðŸŸ¢ Complete | `/docs/BASELINE_METRICS.md` - Comprehensive documentation with 9 evaluation suites, metric definitions (retrieval, answer quality, grounding, citation, entity/relationship extraction, community summary, lazy vs eager, negative tests); 3-tier SLOs (P0/P1/P2) with thresholds; regression detection criteria (5%/10% drops); CLI usage examples; trend analysis API; dataset references; 104 unit tests at `/backend/src/evaluation/__tests__/baseline-documentation.test.js` |
| F1.3.4 | CI Regression Check | Automated check that metrics don't regress on PRs | ðŸŸ¢ Complete | `/.github/workflows/ci.yml` - evaluation-regression job with benchmark dataset, PR comments, artifact upload, threshold enforcement; Dataset: `/backend/src/evaluation/datasets/ci_benchmark.json` |
| F1.3.5 | Evaluation Dashboard | Visual dashboard showing metric trends over time | ðŸŸ¢ Complete | `/backend/src/evaluation/dashboard-service.js` - ASCII sparkline trends, health scoring, baseline comparison reports, markdown/JSON output; API: GET `/api/evaluation/dashboard`, `/api/evaluation/dashboard/comparison`, `/api/evaluation/dashboard/status` |

---

## Phase 2: Ontology & Temporal Modeling

**Goal:** Enable schema evolution and temporal reasoning
**Priority:** P0 - Critical
**Estimated Duration:** 2-3 weeks

### 2.1 Formal Ontology Definition

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F2.1.1 | JSON-LD Ontology Schema | Define all entity types and relationships in JSON-LD format | ðŸŸ¢ Complete | `/ontology/business-process.jsonld` |
| F2.1.2 | Type Inheritance | Define type hierarchy (e.g., Task subClassOf Activity) | ðŸŸ¢ Complete | `/backend/src/services/ontology-service.js` - `expandTypeWithSubtypes()`, `getTypeTree()`; `/backend/src/services/graph-rag-service.js` - `queryByType()`, `queryWithTypeFilter()`, `getTypeHierarchy()`; API: GET `/api/ontology/types/:type/subtree`, GET `/api/graphrag/query-by-type`, POST `/api/graphrag/query-with-type-filter` |
| F2.1.3 | Relationship Domain/Range | Define valid source and target types for each relationship | ðŸŸ¢ Complete | `/ontology/relationship-constraints.json` |
| F2.1.4 | Ontology Validation Service | Validate extracted entities/relationships against ontology | ðŸŸ¢ Complete | `/backend/src/services/ontology-service.js` |
| F2.1.5 | Ontology API Endpoint | GET /api/ontology/types - Return current ontology for UI/clients | ðŸŸ¢ Complete | `/backend/src/index.js` - GET /api/ontology/types (full, entity-types, relationship-types, hierarchy, metadata views), POST /api/ontology/validate, POST /api/ontology/normalize |

### 2.2 Ontology Versioning

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F2.2.1 | Ontology Version Field | Add version number to ontology definition | ðŸŸ¢ Complete | `/ontology/business-process.jsonld` - owl:versionIRI, owl:priorVersion, bke:versionMetadata, bke:versionHistory; `/backend/src/services/ontology-service.js` - parseVersion(), compareVersions(), getVersionInfo(), getVersionHistory(), isVersionCompatible(), getVersionChangeType(), formatVersion(), validateVersion(), getNextVersion(); API: GET `/api/ontology/version`, `/api/ontology/version/history`, `/api/ontology/version/next`, POST `/api/ontology/version/compare`, `/api/ontology/version/validate` |
| F2.2.2 | Migration Framework | System for defining and running ontology migrations | ðŸŸ¢ Complete | `/backend/src/services/ontology-migration-service.js` - Load migrations from `/ontology/migrations/`; track applied migrations in Cosmos DB or file storage; execute in version order; support dry-run preview; MigrationContext for change tracking (addEntityType, addRelationshipType, etc.); JSON/JS migration file formats with up/down/validate functions; `/backend/src/services/migration-storage-adapter.js` - Cosmos DB + file-based storage adapters; Example migration at `/ontology/migrations/1.1.0-add-project-entity-type.js`; API endpoints: GET `/api/ontology/migrations`, `/api/ontology/migrations/pending`, `/api/ontology/migrations/preview/:version`, POST `/api/ontology/migrations/run/:version`, `/api/ontology/migrations/run-all`, `/api/ontology/migrations/rollback/:version`, `/api/ontology/migrations/create`; 32 unit tests |
| F2.2.3 | Type Deprecation Support | Mark types as deprecated with replacement mapping | ðŸŸ¢ Complete | `/backend/src/services/ontology-service.js` - isTypeDeprecated(), getDeprecationInfo(), getReplacementType(), getDeprecatedTypes(), deprecateType(), undeprecateType(), getDeprecationWarning(), getMigrationPath(), validateDeprecations(); Deprecation properties in ontology: owl:deprecated, bke:replacedBy, bke:deprecationReason, bke:deprecationDate, bke:removalVersion, bke:migrationGuide; Validation integration with deprecation warnings; API endpoints: GET `/api/ontology/deprecated`, `/api/ontology/deprecated/:type`, `/api/ontology/deprecated/:type/migration-path`, `/api/ontology/deprecated/validate`, POST `/api/ontology/deprecate`, `/api/ontology/undeprecate`; 36 unit tests |
| F2.2.4 | Migration Dry-Run | Preview migration impact before applying | ðŸŸ¢ Complete | Implemented as part of F2.2.2 - `dryRun: true` option in runMigration(); GET `/api/ontology/migrations/preview/:version` endpoint; shows expected entity/relationship type changes without applying |
| F2.2.5 | Rollback Capability | Ability to rollback failed migrations | ðŸŸ¢ Complete | Implemented as part of F2.2.2 - `down()` function in migrations for rollback logic; `rollbackMigration()` method; POST `/api/ontology/migrations/rollback/:version` endpoint; supports dry-run rollback preview |

### 2.3 Temporal Entity Modeling

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F2.3.1 | Temporal Schema Fields | Add valid_from, valid_to, superseded_by to entity schema | ðŸŸ¢ Complete | `/ontology/business-process.jsonld` - 6 temporal properties (validFrom, validTo, supersededBy, supersedes, temporalStatus, versionSequence); SUPERSEDED_BY/SUPERSEDES relationships; TemporalStatusDefinition class; `/ontology/migrations/1.2.0-add-temporal-schema-fields.js` - Migration with up/down/validate; `/backend/src/services/graph-service.js` - _computeTemporalStatus(), findCurrentEntities(), findEntitiesValidAt(), getEntityVersionHistory(), findVertexById(), createEntityVersion(), findEntitiesByTemporalStatus(), refreshTemporalStatus(), refreshAllTemporalStatuses(), getTemporalStats(); `/backend/src/services/temporal-service.js` - Validation, status computation, filtering, sorting, version chain validation; 43 unit tests |
| F2.3.2 | REPLACED_BY Relationship | New relationship type for entity succession | ðŸŸ¢ Complete | `REPLACED_BY` and `REPLACES` relationships for entity succession tracking (e.g., system replacements); added to ontology v1.3.0 and migration 1.3.0; 14 unit tests |
| F2.3.3 | DEPRECATED_BY Relationship | New relationship type for deprecation tracking | ðŸŸ¢ Complete | `DEPRECATED_BY` and `DEPRECATES` relationships for soft deprecation tracking between entities; added to ontology v1.3.0 and migration 1.3.0; 14 unit tests |
| F2.3.4 | Time-Aware Graph Queries | Query graph state at specific point in time | ðŸŸ¢ Complete | `/backend/src/services/graph-service.js` - getGraphSnapshotAt(), findNeighborsValidAt(), traverseGraphAt(), compareGraphStates(); `/backend/src/services/graph-rag-service.js` - queryAtTime(), generateAnswerAtTime(), getGraphSnapshot(); API endpoints: POST `/api/graphrag/temporal/query`, `/api/graphrag/temporal/answer`, `/api/graphrag/temporal/traverse`, GET `/api/graphrag/temporal/snapshot`, `/api/graphrag/temporal/compare`, `/api/graphrag/temporal/neighbors`; 26 unit tests |
| F2.3.5 | Entity History API | GET /api/entities/:id/history - Return entity version history | ðŸŸ¢ Complete | API endpoint wired to graph temporal version chain with metadata |
| F2.3.6 | Entity History UI | Timeline visualization of entity changes | ðŸŸ¢ Complete | `/frontend/components/EntityHistoryTimeline.tsx` - Timeline visualization component showing entity version history; displays temporal status (current/superseded/pending/expired) with color-coded badges; expandable version cards with full details (name, type, description, validFrom/validTo, changeReason, changedBy); version chain navigation (supersedes/supersededBy links); compact mode for embedded use; maxVersions prop for pagination; keyboard accessible; relative time display; 45 unit tests |

---

## Phase 3: Advanced Graph Analytics

**Goal:** Enable sophisticated graph-based insights
**Priority:** P1 - High Value
**Estimated Duration:** 2-3 weeks

### 3.1 Community Detection

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F3.1.1 | Louvain Algorithm | Implement Louvain community detection algorithm | ðŸŸ¢ Complete | `/backend/src/algorithms/louvain.js` |
| F3.1.2 | Community Storage | Store detected communities in dedicated index | ðŸŸ¢ Complete | `/backend/src/services/community-storage-service.js` - Cosmos DB persistent storage with API endpoints |
| F3.1.3 | Community Summary Generation | Generate LLM summaries for each community | ðŸŸ¢ Complete | `/backend/src/services/community-summary-service.js` |
| F3.1.4 | Incremental Community Updates | Update communities when new documents added | ðŸŸ¢ Complete | `/backend/src/algorithms/louvain.js` - DF Louvain incremental detection; `/backend/src/services/graph-service.js` - change tracking; `/backend/src/services/community-summary-service.js` - selective regeneration; API: POST /api/graphrag/communities/incremental |
| F3.1.5 | Community Context in GraphRAG | Include community summaries in query context | ðŸŸ¢ Complete | `/backend/src/services/graph-rag-service.js` - Auto-includes in regular queries + globalQuery map-reduce |
| F3.1.6 | Community Visualization | UI to explore detected communities | ðŸŸ¢ Complete | `/frontend/app/dashboard/communities/page.tsx` - Interactive Cytoscape visualization with color-coded clusters; `/frontend/components/CommunityVisualization.tsx` - Main component with zoom/pan/layout controls, community list, hover highlighting, color mode toggle (community/entity type); `/frontend/components/CommunityPanel.tsx` - Detail panel with summary, stats, type distribution, key entities, members list; Navigation link added; 64 unit tests |

### 3.2 Entity Importance Metrics

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F3.2.1 | PageRank Algorithm | Calculate PageRank scores for all entities | ðŸŸ¢ Complete | `/backend/src/algorithms/pagerank.js` |
| F3.2.2 | Betweenness Centrality | Calculate betweenness centrality scores | ðŸŸ¢ Complete | `/backend/src/algorithms/betweenness.js` |
| F3.2.3 | Mention Frequency Tracking | Track how often each entity is mentioned across docs | ðŸŸ¢ Complete | `graph-service.js` - incrementMentionCount(), batchUpdateMentionCounts(); `importance-service.js` - getEntityMentionStats(), getMentionFrequencyAnalysis(); API: GET /api/entities/:id/mention-stats, /api/entities/top-mentioned, /api/entities/mention-analysis |
| F3.2.4 | Importance Field on Entities | Store computed importance score on each entity | ðŸŸ¢ Complete | `/backend/src/services/importance-service.js` |
| F3.2.5 | Importance-Weighted Retrieval | Use importance scores to rank retrieval results | ðŸŸ¢ Complete | `/backend/src/services/graph-rag-service.js` - PageRank+RRF weighted retrieval |
| F3.2.6 | Importance API Endpoint | GET /api/entities/important - Return top entities by importance | ðŸŸ¢ Complete | `/backend/src/index.js` - supports pagerank, betweenness, combined algorithms |

### 3.3 Impact Analysis

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F3.3.1 | Upstream Dependency Traversal | "What does X depend on?" query | ðŸŸ¢ Complete | `/backend/src/services/impact-analysis-service.js` - getUpstreamDependencies() |
| F3.3.2 | Downstream Impact Traversal | "What depends on X?" query | ðŸŸ¢ Complete | `/backend/src/services/impact-analysis-service.js` - getDownstreamImpact() |
| F3.3.3 | Impact Scoring | Score impact based on path length and entity importance | ðŸŸ¢ Complete | `/backend/src/services/impact-analysis-service.js` - calculateImpactScore() with decay factor |
| F3.3.4 | Impact Analysis API | POST /api/graphrag/impact - Return impact analysis | ðŸŸ¢ Complete | `/backend/src/index.js` - GET/POST /api/graphrag/impact/* endpoints |
| F3.3.5 | Impact Visualization | UI showing dependency tree with impact scores | ðŸŸ¢ Complete | `/frontend/components/ImpactVisualization.tsx` - Cytoscape.js visualization with radial/tree/force-directed layouts; color-coded by impact score (red=critical, orange=high, yellow=medium, green=low) or entity type; node size scales with impact; upstream (circular) and downstream (rounded rectangle) shape differentiation; view mode toggle (both/upstream/downstream); interactive hover highlighting; selected node details panel; simulation results panel; legend with direction/impact/metadata info; `/frontend/app/dashboard/impact/page.tsx` - Dashboard page with entity search, direction/depth controls, stats cards (upstream/downstream/critical/risk), type distribution grid, critical entities table; Navigation link added; 48 unit tests |
| F3.3.6 | Change Simulation | "What if we remove X?" simulation | ðŸŸ¢ Complete | `/backend/src/services/impact-analysis-service.js` - simulateRemoval() |

---

## Phase 4: Improved Ingestion

**Goal:** Better document understanding and integration
**Priority:** P1 - High Value
**Estimated Duration:** 2-3 weeks

### 4.1 Semantic Chunking

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F4.1.1 | Topic Detection | Use embeddings to detect topic boundaries | ðŸŸ¢ Complete | `/backend/src/chunking/semantic-chunker.js` - Percentile-based breakpoint detection with configurable threshold |
| F4.1.2 | Semantic Chunk Splitter | Split documents at topic boundaries, not fixed tokens | ðŸŸ¢ Complete | `/backend/src/chunking/semantic-chunker.js` - LlamaIndex-style semantic splitting with buffer context |
| F4.1.3 | Chunk Coherence Score | Measure semantic coherence within each chunk | ðŸŸ¢ Complete | `/backend/src/chunking/chunk-coherence-score.js` - Centroid-based + pairwise coherence, variance score; API: POST `/api/chunking/coherence`, `/api/chunking/coherence/batch`, `/api/chunking/semantic` with `includeCoherence` option |
| F4.1.4 | A/B Chunking Comparison | Compare retrieval quality: semantic vs fixed-size | ðŸŸ¢ Complete | `/backend/src/evaluation/chunking-comparison.js` - Full A/B comparison with MRR/MAP/NDCG metrics, winner determination, improvement percentages; API: POST `/api/evaluation/chunking/compare`, `/api/evaluation/chunking/compare/report`, `/api/evaluation/chunking/benchmark` |
| F4.1.5 | Configurable Chunking Strategy | Allow selection of chunking method per document type | ðŸŸ¢ Complete | `CHUNKING_STRATEGY` in document-processor.js - supports 'fixed', 'semantic', 'auto' |

### 4.2 External Connectors

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F4.2.1 | SharePoint Site Connector | Connect to SharePoint sites for document ingestion | ðŸŸ¢ Complete | `/backend/src/connectors/sharepoint-connector.js` - Microsoft Graph API integration via @microsoft/microsoft-graph-client; Azure AD authentication (ClientSecretCredential/ClientCertificateCredential); site/drive discovery; delta query sync for incremental updates; SharePointConnectionConfig validation with env var fallbacks; SharePointDocument class with metadata extraction; SharePointDeltaState for change tracking; file type filtering by extension; folder inclusion/exclusion patterns; document content streaming download; permission retrieval; ConnectorHealthService integration; telemetry tracking; 52 unit tests |
| F4.2.2 | SharePoint Permission Sync | Sync document permissions/ACLs from SharePoint | ðŸŸ¢ Complete | `/backend/src/connectors/sharepoint-connector.js` - SharePointConnectionConfig extended with syncPermissions, includeInheritedPermissions, permissionRolesToSync options; SharePointDocument.setPermissions() maps Graph API permissions to allowedGroups; supports Azure AD groups, SharePoint groups, direct user access (user: prefix), organization-wide and anonymous links; configurable role filtering; inherited permission exclusion; getRawPermissions() for security trimming; sync result tracking (permissionsSynced/permissionsFailed); env vars: SHAREPOINT_SYNC_PERMISSIONS, SHAREPOINT_INCLUDE_INHERITED_PERMISSIONS, SHAREPOINT_PERMISSION_ROLES_TO_SYNC; 23 new unit tests (75 total) |
| F4.2.3 | ADLS Gen2 Connector | Connect to Azure Data Lake Storage | ðŸŸ¢ Complete | `/backend/src/connectors/adls-gen2-connector.js` - @azure/storage-file-datalake SDK v12.28.1; BaseConnector abstract class with standardized interface; 4 auth methods (DefaultAzureCredential, StorageKey, SASToken, ConnectionString); DataLakeServiceClient/FileSystemClient/FileClient operations; listDocuments with pagination, extension/size/path filtering; getDocument with content streaming, MD5 hash; health check with latency tracking; directory listing; file system properties; 12 config settings in configuration-service.js (ADLS_*); API endpoints: GET/POST/DELETE `/api/adls/connectors`, GET `/api/adls/connectors/:id`, `/api/adls/connectors/:id/health`, `/api/adls/connectors/:id/documents`, `/api/adls/connectors/:id/directories`, `/api/adls/connectors/:id/file-system`, `/api/adls/auth-types`; ConnectorHealthService integration; telemetry tracking; 45 unit tests |
| F4.2.4 | ADLS ACL Sync | Sync ACLs from ADLS to document permissions | ðŸŸ¢ Complete | `/backend/src/connectors/adls-gen2-connector.js` - POSIX ACL support via getFileAccessControl(), getDirectoryAccessControl(), getDocumentWithAcls(); ACL parsing with _parseAclString()/_parseAclEntry(); allowedGroups mapping for security trimming; batch ACL retrieval; config options (ADLS_SYNC_ACLS, ADLS_INCLUDE_DEFAULT_ACLS, ADLS_ACL_READ_PERMISSION_REQUIRED); integrated with listDocuments() via includeAcls option; 59 unit tests |
| F4.2.5 | Incremental Sync | Only process new/changed documents | ðŸŸ¢ Complete | `/backend/src/services/incremental-sync-service.js` - Full incremental sync framework with SyncSession tracking, ConnectorSyncState persistence to Cosmos DB, ChangeDetector for delta detection (timestamp/hash/size/version comparison), delta token support for APIs, checkpoint-based resumability, batch processing with progress tracking; 8 config settings in configuration-service.js (batch size, checkpoint interval, retries, stale threshold, history retention, max concurrent, delta token expiry); SyncType (full/incremental/delta), SyncStateStatus, ChangeType enums; integration with ConnectorHealthService; API endpoints: GET `/api/sync/states`, `/api/sync/stats`, `/api/sync/sessions`, `/api/sync/sessions/:id`, `/api/sync/types`, `/api/connectors/:id/sync/state`, `/api/connectors/:id/sync/history`, POST `/api/sync/sessions/:id/cancel`, `/api/connectors/:id/sync/incremental`, `/api/connectors/:id/sync/incremental/:sessionId/batch`, `/api/connectors/:id/sync/incremental/:sessionId/complete`, `/api/sync/detect-changes`; 53 unit tests |
| F4.2.6 | Deletion Sync | Remove documents when deleted from source | ðŸŸ¢ Complete | `/backend/src/services/deletion-sync-service.js` - Soft delete with configurable grace period (7 days default); PendingDeletion tracking with markedAt/scheduledDeletionAt; document recovery within grace period; automatic expired deletion processing; batch deletion detection via `detectDeletedDocuments()`; per-connector deletion state tracking (ConnectorDeletionState); search index and graph cleanup integration; audit logging; DeletionStatus (active/pending_deletion/deleted/recovered); DeletionReason (source_deleted/manual/policy/expired/superseded); API endpoints: GET `/api/deletion-sync/pending`, `/api/deletion-sync/pending/:id`, `/api/deletion-sync/history`, `/api/deletion-sync/connectors`, `/api/deletion-sync/connectors/:id`, `/api/deletion-sync/stats`, `/api/deletion-sync/config`, POST `/api/deletion-sync/mark`, `/api/deletion-sync/recover/:id`, `/api/deletion-sync/detect`, `/api/deletion-sync/process-expired`, DELETE `/api/deletion-sync/delete/:id`, PUT `/api/deletion-sync/config`; 63 unit tests |
| F4.2.7 | Connector Health Monitoring | Track connector status and sync errors | ðŸŸ¢ Complete | `/backend/src/services/connector-health-service.js` - Per-connector health status tracking (healthy/degraded/unhealthy/disconnected); sync operation tracking (start/complete/error); time-windowed error tracking with ActivityWindow; metrics collection (docs processed, sync duration, error rates); status change listeners; error pattern analysis with recommendations; dashboard widget data; 9 config settings in config-service.js; API endpoints: GET `/api/connectors`, `/api/connectors/health`, `/api/connectors/health/dashboard`, `/api/connectors/types`, `/api/connectors/sync/history`, `/api/connectors/:id`, `/api/connectors/:id/errors`, `/api/connectors/:id/errors/analysis`, `/api/connectors/:id/metrics`, POST `/api/connectors`, `/api/connectors/:id/sync/start`, `/api/connectors/:id/sync/complete`, `/api/connectors/:id/sync/error`, `/api/connectors/:id/metrics/reset`, PUT `/api/connectors/:id/enabled`, DELETE `/api/connectors/:id`; 53 unit tests |

### 4.3 Extraction Quality Improvements

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F4.3.1 | Relationship Validation Rules | Enforce domain/range constraints during extraction | ðŸŸ¢ Complete | `/backend/src/validation/relationship-validator.js` - Validates entities/relationships against ontology domain/range constraints during document processing; applies confidence penalties for violations; 33 unit tests |
| F4.3.2 | Confidence Penalty for Violations | Reduce confidence for constraint-violating extractions | ðŸŸ¢ Complete | `/backend/src/validation/relationship-validator.js` - Implemented via CONFIDENCE_PENALTIES (domain: 0.85, range: 0.85, both: 0.7, unknown type: 0.7) |
| F4.3.3 | Extraction Warnings in Staging | Show validation warnings in review UI | ðŸŸ¢ Complete | `/backend/src/services/staging-service.js` - getValidationWarnings() method returns entities/relationships with warnings categorized by type; preview includes validationSummary |
| F4.3.4 | Custom Entity Type Definitions | Allow admins to add custom entity types | ðŸŸ¢ Complete | `/backend/src/services/custom-ontology-service.js`, `/backend/src/services/ontology-service.js`, POST/DELETE `/api/ontology/custom-types`; Persists to Cosmos DB |
| F4.3.5 | Custom Relationship Definitions | Allow admins to add custom relationship types | ðŸŸ¢ Complete | `/backend/src/services/custom-ontology-service.js` - CRUD for custom relationship types with domain/range constraints; `/backend/src/services/ontology-service.js` - runtime registration; API endpoints: GET/POST `/api/ontology/custom-relationship-types`, DELETE `/api/ontology/custom-relationship-types/:name`; 35 unit tests |
| F4.3.6 | Extraction Prompt Tuning | A/B test different extraction prompts | ðŸŸ¢ Complete | `/backend/src/services/prompt-tuning-service.js` - A/B testing framework for extraction prompts; 5 prompt variants (baseline, few_shot, chain_of_thought, structured_guidelines, concise); experiment lifecycle (draft/running/paused/completed); variant assignment by document hash; result tracking with latency/entity/relationship metrics; comparison analysis with winner determination and improvement percentage; JSON/markdown/text reports; `/backend/src/prompts/prompt-variants.js` - variant definitions with hypotheses; API endpoints: GET `/api/prompt-tuning/variants`, `/api/prompt-tuning/experiments`, POST `/api/prompt-tuning/experiments`, `/api/prompt-tuning/experiments/:id/start/pause/complete`, `/api/prompt-tuning/extract/entities`, `/api/prompt-tuning/extract/relationships`; 81 unit tests |

---

## Phase 5: Production Hardening

**Goal:** Enterprise-ready operations
**Priority:** P1 - High Value
**Estimated Duration:** 2-3 weeks

### 5.1 Persistent Audit Logging

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F5.1.1 | Audit Log Cosmos Container | Create dedicated container for audit logs | ðŸŸ¢ Complete | Partition by date or userId |
| F5.1.2 | Audit Persistence Service | Service to write/query persistent audit logs | ðŸŸ¢ Complete | `/backend/src/services/audit-persistence-service.js` |
| F5.1.3 | Denial Log Persistence | Persist access denial logs (currently in-memory) | ðŸŸ¢ Complete | Critical for security audits |
| F5.1.4 | Audit Log Retention Policy | Automatically archive/delete old audit logs | ðŸŸ¢ Complete | Config-driven retention (Cosmos TTL) + Manual Archive API; API: `POST /api/audit/retention` |
| F5.1.5 | Audit Log Export | Export audit logs to CSV/JSON for compliance | ðŸŸ¢ Complete | `/backend/src/services/audit-export-service.js` - CSV/JSON/NDJSON export with date/action/entity filters; file and streaming exports; scheduled periodic exports with interval configuration; job tracking and statistics; API endpoints: GET `/api/audit/export` (with download option), POST `/api/audit/export/file`, GET/DELETE `/api/audit/export/files`, GET/POST/DELETE `/api/audit/export/schedule`, POST `/api/audit/export/schedule/:name/run`, GET `/api/audit/export/stats`, GET `/api/audit/export/jobs`; admin/auditor role protection; 39 unit tests |
| F5.1.6 | Suspicious Activity Alerts | Alert on unusual access patterns | ðŸŸ¢ Complete | `/backend/src/services/suspicious-activity-service.js` - Real-time detection of 9 suspicious patterns (excessive_denials, high_query_volume, off_hours_access, rapid_requests, bulk_document_access, auth_failure_spike, rate_limit_violation, data_exfiltration_pattern, unusual_entity_access); configurable thresholds via env vars; alert cooldown to prevent spam; severity levels (low/medium/high/critical); Azure Monitor integration via Application Insights (trackSecurityEvent, trackMetric); historical log analysis; integrated with security-trimming-service and user-rate-limit-service for automatic tracking; API endpoints: GET `/api/security/suspicious-activity/stats`, `/api/security/suspicious-activity/users`, `/api/security/suspicious-activity/users/:userId`, `/api/security/suspicious-activity/azure-monitor-config`, POST `/api/security/suspicious-activity/analyze`, `/api/security/suspicious-activity/reset`; 38 unit tests |

### 5.2 Performance Optimization

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F5.2.2 | Entity Resolution Caching | Cache entity resolution lookups | ðŸŸ¢ Complete | `/backend/src/services/entity-resolution-cache.js` - LRU caching for resolved entities, embeddings, similarity scores, canonical entities, and similar entities; configurable TTL and max sizes via env vars (CACHE_*); cache statistics tracking with hit rates; health monitoring; API endpoints: GET `/api/entities/cache/stats`, `/api/entities/cache/health`, POST `/api/entities/cache/clear`, `/api/entities/cache/invalidate/:name`, `/api/entities/cache/invalidate-document/:documentId`, `/api/entities/cache/reset-stats`, `/api/entities/cache/toggle`; integrated into EntityResolutionService; 37 unit tests |
| F5.2.3 | Gremlin Query Optimization | Optimize common traversal patterns | ðŸŸ¢ Complete | Profile/logging added; Partition key optimizations for findVertexById/findVerticesByType; Parallel batch updates |
| F5.2.4 | Pagination for All Lists | Add cursor-based pagination to all list endpoints | ðŸŸ¢ Complete | `/backend/src/services/pagination-service.js` - Cursor-based pagination with keyset, continuation token, and offset strategies; standardized response format with `{ items, pagination: { nextCursor, hasMore, pageSize, itemCount } }`; Cosmos DB and in-memory array support; pagination middleware for Express; API endpoints: GET `/api/documents/paginated`, `/api/audit/logs/paginated`; updated `listDocumentsPaginated()` in cosmos.js, `queryLogsPaginated()` in audit-persistence-service.js; backward compatible with existing `limit` parameter; 57 unit tests |
| F5.2.5 | Latency Budgets | Define and enforce latency SLOs | ðŸŸ¢ Complete | `/backend/src/services/latency-budget-service.js` - Percentile tracking (P50/P95/P99) via time-bucketed rolling windows; operation-specific SLOs (query: 3s, processing: 5min, search: 1.5s, etc.); warning/critical/breach severity detection; telemetry alerts integration; API endpoints: GET `/api/latency-budgets`, `/api/latency-budgets/stats`, `/api/latency-budgets/health`, `/api/latency-budgets/:operation`, POST `/api/latency-budgets/:operation/reset`, `/api/latency-budgets/record`; middleware at `/backend/src/middleware/latency-budget.js` for automatic request tracking; 54 unit tests |
| F5.2.6 | Circuit Breakers | Add circuit breakers for external services | ðŸŸ¢ Complete | `/backend/src/services/circuit-breaker-service.js` - opossum-based circuit breakers for OpenAI, Search, Gremlin services; configurable thresholds via env vars; event logging/telemetry; API endpoints: GET `/api/circuit-breakers`, `/api/circuit-breakers/:service`, `/api/circuit-breakers/open`, POST `/api/circuit-breakers/:key/reset`, `/api/circuit-breakers/reset-all`; 32 unit tests |
| F5.2.7 | Performance Dashboard | Real-time latency and throughput monitoring | ðŸŸ¢ Complete | `/backend/src/services/performance-dashboard-service.js` - Aggregates metrics from latency budgets, circuit breakers, entity resolution cache, and rate limits; ThroughputTracker with rolling windows for RPS and error rate; HistoryStorage for metric snapshots; ASCII sparkline visualization; health score calculation (healthy/warning/critical); throughput middleware for automatic request tracking; configurable via env vars (PERF_*); API endpoints: GET `/api/performance`, `/api/performance/health`, `/api/performance/throughput`, `/api/performance/latency`, `/api/performance/circuit-breakers`, `/api/performance/cache`, `/api/performance/rate-limits`, `/api/performance/history`, `/api/performance/report`, POST `/api/performance/reset`; 56 unit tests |

### 5.3 Security Hardening

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F5.3.1 | Adversarial Test Dataset | Create prompt injection and jailbreak test cases | ðŸŸ¢ Complete | `/backend/src/evaluation/datasets/adversarial_tests.json` - 89 test cases covering 19 attack categories (instructionOverride, systemPromptExtraction, rolePlayManipulation, delimiterInjection, codeExecution, dataExfiltration, jailbreakPhrases, promptLeaking, indirectInjection, obfuscation, typoglycemia, payloadSplitting, flipAttack, sugarCoated, multiTurn, structuralAttacks, ragPoisoning, agentAttacks, negativeTests); 4 multi-turn sequences; OWASP LLM01:2025 compliant; Evaluator at `/backend/src/evaluation/adversarial-evaluator.js` with precision/recall/F1 metrics, per-category analysis, markdown/text reports; 42 unit tests |
| F5.3.2 | Prompt Injection Detection | Detect and block prompt injection attempts | ðŸŸ¢ Complete | `/backend/src/services/prompt-injection-service.js` - Multi-layered defense with 9 attack pattern categories (instructionOverride, systemPromptExtraction, rolePlayManipulation, delimiterInjection, codeExecution, dataExfiltration, jailbreakPhrases, promptLeaking, indirectInjection); heuristic scoring with configurable threshold; structural analysis for hidden Unicode, base64, and long text; sanitization for neutralizing detected patterns; cross-message analysis for chat formats; configurable via env vars (PROMPT_INJECTION_ENABLED, PROMPT_INJECTION_HEURISTIC_THRESHOLD, PROMPT_INJECTION_BLOCK_HIGH); Middleware at `/backend/src/middleware/prompt-injection.js` with guard/monitor/sanitizer modes; API endpoints: POST `/api/security/prompt-injection/analyze`, `/api/security/prompt-injection/sanitize`, GET `/api/security/prompt-injection/stats`, `/api/security/prompt-injection/patterns`, POST `/api/security/prompt-injection/stats/reset`; integrated with GraphRAG query endpoint; 110 unit tests |
| F5.3.3 | Information Leakage Tests | Test for relationship-based information leakage | ðŸŸ¢ Complete | `/backend/src/services/__tests__/information-leakage.test.js` - 58 unit tests covering 12 leakage categories (cross-role classification, role escalation, graph traversal, multi-hop inference, pending entity status, ownership/visibility, sensitive field trimming, denial message leakage, group isolation, department isolation, combined access control, OData injection); tests relationship-based inference attacks (transitive, diamond patterns, entity existence); validates security trimming for documents and graph entities/relationships; 58 unit tests |
| F5.3.4 | Security Trimming Bypass Tests | Attempt to bypass security filters | ðŸŸ¢ Complete | `/backend/src/evaluation/security-bypass-evaluator.js` - Red-team test framework with 44 test cases across 10 categories (classification_bypass, group_membership_bypass, ownership_bypass, department_bypass, role_escalation, odata_injection, field_injection, graph_traversal_bypass, sensitive_field_access, negative_tests); test dataset at `/backend/src/evaluation/datasets/security_bypass_tests.json`; modular tester classes (ClassificationBypassTester, GroupMembershipBypassTester, RoleEscalationTester, DepartmentBypassTester, ODataInjectionTester, SensitiveFieldTester, GraphTraversalBypassTester); severity classification (critical/high/medium/low); JSON/markdown/text report generation; actionable security recommendations; 3 multi-step attack sequences; 60 unit tests |
| F5.3.5 | Rate Limiting Enhancements | Per-user rate limits, not just global | ðŸŸ¢ Complete | `/backend/src/services/user-rate-limit-service.js` - Per-user rate limiting using user ID from JWT; role-based tiered limits with configurable multipliers (admin: 3x, reviewer: 2x, contributor: 1.5x, reader: 1x); fallback to IP for unauthenticated requests; combined user+IP key for sensitive endpoints; statistics tracking and monitoring; configurable via env vars (RATE_LIMIT_*_MULTIPLIER, RATE_LIMIT_*_WINDOW_MS, RATE_LIMIT_*_MAX_*); API endpoints: GET `/api/rate-limits`, `/api/rate-limits/config`, `/api/rate-limits/me`, `/api/rate-limits/user/:userId`, POST `/api/rate-limits/reset`; integrated with express-rate-limit v7; 43 unit tests |
| F5.3.6 | Security Test Automation | Automated security tests in CI pipeline | ðŸŸ¢ Complete | `/backend/src/evaluation/run-security-tests.js` - CLI runner with 47 unit tests; `/.github/workflows/ci.yml` - `security-tests` job with adversarial evaluation, JSON/Markdown reports, artifact upload, PR comments, threshold enforcement (F1: 0.85, precision: 0.80, recall: 0.85, critical detection: 0.95); supports --verbose, --category filters, --no-multi-turn; CI/CD metadata tracking (git commit/branch/tags) |

---

## Phase 6: Advanced GraphRAG

**Goal:** State-of-the-art global question answering
**Priority:** P2 - Nice to Have
**Estimated Duration:** 3-4 weeks

### 6.1 GraphRAG Summarization

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F6.1.1 | Map Phase: Community Summaries | Generate summary for each detected community | ðŸŸ¢ Complete | `/backend/scripts/generate-community-summaries.js` - Standalone script + integrated into `rebuild-graph.js`; uses `CommunitySummaryService.generateAllSummaries()` |
| F6.1.2 | Reduce Phase: Cross-Community Synthesis | Synthesize community summaries into global answer | ðŸŸ¢ Complete | `CommunitySummaryService.globalQuery()` and `reducePartialAnswers()` implements the reduce phase; integrated into `GraphRAGService.globalQuery()` |
| F6.1.3 | Summary Caching | Cache generated summaries for reuse | ðŸŸ¢ Complete | `SummaryCache` class in `community-summary-service.js` with TTL and LRU eviction; also supports persistent storage via `CommunityStorageService` |
| F6.1.4 | Incremental Summary Updates | Update summaries when documents added/changed | ðŸŸ¢ Complete | `CommunitySummaryService.updateSummariesIncremental()` uses smart change detection to only regenerate changed communities; persists results |
| F6.1.5 | Summary Quality Evaluation | Measure summary accuracy and coverage | ðŸŸ¢ Complete | `/backend/src/evaluation/community-summary-evaluator.js` - Evaluates summary quality using LLM-as-Judge (Accuracy, Relevance, Coherence) and programmatic metrics (Entity Coverage); Integrated into benchmark runner; 9 unit tests |

### 6.2 LazyGraphRAG

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F6.2.1 | On-Demand Community Detection | Detect communities at query time, not indexing | ðŸŸ¢ Complete | `detectSubgraphCommunities()` in `louvain.js` |
| F6.2.2 | Query-Time Summarization | Generate summaries on-the-fly | ðŸŸ¢ Complete | `GraphRAGService._buildCommunityContext` with `lazySummaries` option; uses `CommunitySummaryService.generateSummariesForSubgraph()` |
| F6.2.3 | Lazy Summary Caching | Cache lazy-generated summaries | ðŸŸ¢ Complete | Implemented with stable community ID hashing (members hash) in `CommunitySummaryService`; verified with tests |
| F6.2.4 | Lazy vs Eager Comparison | Compare latency and quality of both approaches | ðŸŸ¢ Complete | `/backend/src/evaluation/lazy-vs-eager-comparison.js` - Full A/B comparison service with `compareStrategies()`, `runComparisonBenchmark()`, `getRecommendation()`; text/markdown/JSON report formats; benchmark dataset at `/datasets/lazy_vs_eager_benchmark.json` (15 queries); API endpoints: POST `/api/evaluation/lazy-vs-eager`, `/api/evaluation/lazy-vs-eager/benchmark`, `/api/evaluation/lazy-vs-eager/report`, GET `/api/evaluation/lazy-vs-eager/sample-dataset`; integrated into benchmark runner as `lazy-vs-eager` suite; measures avg latency, LLM-as-Judge quality, community counts, win/loss tallies; recommendation engine with quality-weighted scoring; 27 unit tests |
| F6.2.5 | Configurable GraphRAG Mode | API option to choose lazy vs pre-computed | ðŸŸ¢ Complete | Supported via `options.lazySummaries` in `/api/graphrag/search` and `/api/graphrag/query` |

### 6.3 Persona-Specific Views

| ID | Feature | Description | Status | Notes |
|----|---------|-------------|--------|-------|
| F6.3.1 | Persona Definitions | Define personas: Ops, IT, Leadership, Compliance | ðŸŸ¢ Complete | `/backend/src/personas/index.js` - 5 personas (Ops, IT, Leadership, Compliance, Default) with entity type weights, category weights, relationship weights, summary styles (technical/executive/operational/compliance/balanced), context preferences, example queries; PersonaService singleton with entity scoring, ranking, filtering; validation utilities; 80 unit tests |
| F6.3.2 | Persona Retrieval Weights | Different weights for entity types per persona | ðŸŸ¢ Complete | `/backend/src/services/graph-rag-service.js` - Integrated `PersonaService.calculateEntityScore()` into graph expansion and chunk ranking; adds priority scoring to entities and relationships |
| F6.3.3 | Persona Summary Style | Different summary styles per persona | ðŸŸ¢ Complete | `/backend/src/services/graph-rag-service.js` - `generateAnswer()` injects `PersonaService.getPromptHint()` into system prompt for tailored response style |
| F6.3.4 | Persona Selection API | Query parameter to specify persona | ðŸŸ¢ Complete | `/backend/src/index.js` - `GET /api/personas`; `POST /api/graphrag/search` and `/answer` support `options.persona`; Swagger docs updated |
| F6.3.5 | Persona Selection UI | Dropdown to select persona in query interface | ðŸŸ¢ Complete | `/frontend/components/PersonaSelector.tsx` - Dropdown with 5 personas (Ops, IT, Leadership, Compliance, Default); color-coded icons; API fetch with fallback; disabled state; 25 unit tests |
| F6.3.6 | Persona-Based Filtering | Optionally filter results by persona relevance | ðŸŸ¢ Complete | `/backend/src/personas/index.js` - FILTERING_DEFAULTS config, per-persona filtering settings (enabled, minEntityRelevance, minRelationshipRelevance, hiddenEntityTypes, hiddenRelationshipTypes); PersonaService methods: getFilteringConfig(), isFilteringEnabled(), shouldShowEntityType(), shouldShowRelationshipType(), filterEntitiesByRelevance(), filterRelationshipsByRelevance(), filterResultsByPersona(), getFilteringSummary(); Leadership hides Database/Application entities and technical relationships (INTEGRATES_WITH, STORES_IN, etc.); GraphRAGService integration: `filterByPersona` option in query(); API endpoints: GET `/api/personas/:personaId/filtering`, `/api/personas/filtering`; 45 unit tests |

---

## Cross-Cutting Features

These features span multiple phases and should be considered throughout.

| ID | Feature | Description | Status | Priority |
|----|---------|-------------|--------|----------|
| FC.1 | Feature Flags | Enable/disable features without deployment | ðŸŸ¢ Complete | `/backend/src/services/feature-flags-service.js` - Centralized flag management with 23 flags across 7 categories (security, performance, ingestion, graphrag, evaluation, ui, experimental); environment variable overrides (FF_* pattern); runtime override API; change listeners; API endpoints: GET `/api/feature-flags`, `/api/feature-flags/stats`, `/api/feature-flags/by-category`, `/api/feature-flags/:key`, `/api/feature-flags/:key/enabled`, POST `/api/feature-flags/:key/override`, DELETE `/api/feature-flags/:key/override`, `/api/feature-flags/overrides`; 51 unit tests |
| FC.2 | Configuration Management | Centralized config for all thresholds and settings | ðŸŸ¢ Complete | `/backend/src/services/configuration-service.js` - Centralized configuration management with 50+ settings across 13 categories (openai, search, document_processing, chunking, cache, circuit_breaker, rate_limiting, graph, evaluation, entity_resolution, security, storage, telemetry); environment variable overrides (CFG_* pattern or specific envVar); schema validation with type checking (number, string, boolean, array, object); min/max range constraints; string options validation; runtime override API with change listeners; restart-required indicators; sensitive value masking; API endpoints: GET `/api/config`, `/api/config/stats`, `/api/config/by-category`, `/api/config/validate`, `/api/config/export`, `/api/config/:key`, `/api/config/:key/value`, POST `/api/config/:key/override`, DELETE `/api/config/:key/override`, `/api/config/overrides`; 57 unit tests |
| FC.3 | Comprehensive Logging | Structured logging for all operations | ðŸŸ¢ Complete | - |
| FC.4 | Error Handling Standards | Consistent error responses across all endpoints | ðŸŸ¢ Complete | - |
| FC.5 | API Versioning | Version API endpoints for backward compatibility | ðŸŸ¢ Complete | `apiVersioning` middleware in `/backend/src/middleware/api-versioning.js` with /api/v{version} path support, `x-api-version` header + `api-version` query param, conflict validation, `X-API-Version` response header, env config (API_DEFAULT_VERSION/API_SUPPORTED_VERSIONS); tests in `/backend/src/middleware/__tests__/api-versioning.test.js` |
| FC.6 | Documentation Generation | Auto-generate API docs from code | ðŸŸ¢ Complete | - |
| FC.7 | Health Check Enhancements | Detailed health checks for all dependencies | ðŸŸ¢ Complete | `/backend/src/services/health-check-service.js` - Comprehensive health checks for 6 dependencies (Cosmos DB, Gremlin, OpenAI, Azure Search, Blob Storage, Doc Intelligence); Kubernetes-compatible liveness/readiness probes; cached health results with configurable TTL; startup validation with retry logic; health history tracking; status change listeners; circuit breaker integration; API endpoints: GET `/health/live`, `/health/ready`, `/health/dependencies`, `/health/dependencies/:dependency`, `/health/summary`, `/health/history`, `/health/startup`, `/health/cache`, `/health/config`, DELETE `/health/cache`; 39 unit tests |

---

## Summary Statistics

| Phase | Total Features | Not Started | In Progress | Complete |
|-------|---------------|-------------|-------------|----------|
| Phase 1: Evaluation | 15 | 0 | 0 | 15 |
| Phase 2: Ontology | 16 | 0 | 0 | 16 |
| Phase 3: Analytics | 18 | 0 | 0 | 18 |
| Phase 4: Ingestion | 17 | 0 | 0 | 17 |
| Phase 5: Hardening | 17 | 0 | 0 | 17 |
| Phase 6: GraphRAG | 16 | 0 | 0 | 16 |
| Cross-Cutting | 7 | 0 | 0 | 7 |
| **Total** | **106** | **0** | **0** | **106** |

---

## Version History

| Version | Date | Changes |
|---------|------|---------|
| 1.0 | 2026-01-22 | Initial feature backlog from SOTA gap analysis |
| 1.1 | 2026-01-22 | Completed F3.1.3 (Community Summary Generation) and F3.1.5 (Community Context in GraphRAG) |
| 1.2 | 2026-01-22 | Completed F3.3.1-F3.3.4 and F3.3.6 (Impact Analysis Service with upstream/downstream traversal, scoring, API, and simulation) |
| 1.3 | 2026-01-22 | Completed F3.1.2 (Community Storage) - Cosmos DB persistent storage with API endpoints at `/api/graphrag/communities/storage/*` |
| 1.4 | 2026-01-22 | Completed F1.2.3 (Grounding Score Calculator) - LLM-based claim verification for hallucination detection at `/backend/src/evaluation/grounding-score.js` |
| 1.5 | 2026-01-22 | Completed F3.2.3 (Mention Frequency Tracking) - Entity mention counting during document processing, mention stats API endpoints at `/api/entities/:id/mention-stats`, `/api/entities/top-mentioned`, `/api/entities/mention-analysis` |
| 1.6 | 2026-01-22 | Completed F1.2.2 (Citation Accuracy Checker) - Multi-method citation verification with n-gram/keyword overlap + LLM verification at `/backend/src/evaluation/citation-accuracy.js` |
| 1.7 | 2026-01-22 | Completed F1.2.5 (Entity Extraction Evaluator) - Precision/recall/F1 with strict/partial/type-only matching modes, per-type metrics, batch evaluation at `/backend/src/evaluation/entity-extraction-evaluator.js` |
| 1.8 | 2026-01-22 | Completed F1.3.1 (Benchmark Runner Script) - CLI tool with 6 evaluation suites (retrieval, answer-quality, grounding, citation, entity-extraction, relationship-extraction), JSON/text/markdown output, CI/CD threshold checks at `/backend/src/evaluation/run-benchmark.js` |
| 1.9 | 2026-01-22 | Completed F1.2.6 (Relationship Extraction Evaluator) - Compare extracted relationships against ground truth with direction accuracy tracking, strict/partial/direction-agnostic/type-only matching modes, per-type metrics, batch evaluation at `/backend/src/evaluation/relationship-extraction-evaluator.js` |
| 1.10 | 2026-01-22 | Completed F1.3.2 (Results Storage) - Persistent storage for benchmark evaluation results with Cosmos DB + local JSON fallback, trend analysis, baseline comparison, regression detection; CLI integration `--save-results`; API endpoints at `/api/evaluation/*` |
| 1.11 | 2026-01-22 | Completed F3.1.4 (Incremental Community Updates) - Dynamic Frontier Louvain algorithm for incremental detection; graph change tracking via `getEntitiesModifiedSince()`/`getEdgesCreatedSince()`; selective summary regeneration for changed communities only; API endpoint at `POST /api/graphrag/communities/incremental` |
| 1.12 | 2026-01-22 | Completed F4.1.1 (Topic Detection), F4.1.2 (Semantic Chunk Splitter), F4.1.5 (Configurable Chunking Strategy) - LlamaIndex-style semantic chunking with percentile-based topic boundary detection, buffer context for embeddings, configurable strategy ('fixed'/'semantic'/'auto') in document processor at `/backend/src/chunking/semantic-chunker.js` |
| 1.13 | 2026-01-22 | Completed F2.1.1 (JSON-LD Ontology Schema) - Formal ontology with 18 entity types, 25 relationship types, type hierarchy (subClassOf), domain/range constraints, Schema.org mappings, and relationship synonym normalization at `/ontology/business-process.jsonld` |
| 1.14 | 2026-01-22 | Completed F2.1.4 (Ontology Validation Service) - Validates entities/relationships against JSON-LD ontology with type hierarchy awareness, domain/range constraint checking, relationship normalization via synonym mappings, batch validation reports, and Levenshtein-based type suggestions at `/backend/src/services/ontology-service.js` |
| 1.15 | 2026-01-22 | Completed F2.1.5 (Ontology API Endpoint) - GET /api/ontology/types with views (full, entity-types, relationship-types, hierarchy, metadata), POST /api/ontology/validate for batch validation, POST /api/ontology/normalize for relationship type normalization; enables dynamic UI generation |
| 1.16 | 2026-01-22 | Completed F1.3.4 (CI Regression Check) - GitHub Actions `evaluation-regression` job in `/.github/workflows/ci.yml`; runs after backend tests; uses CI benchmark dataset with 8 retrieval queries, 3 QA pairs, 3 entity/relationship docs; generates JSON/Markdown reports; uploads artifacts; auto-comments on PRs; fails on threshold regression (0.6); dataset at `/backend/src/evaluation/datasets/ci_benchmark.json` |
| 1.17 | 2026-01-22 | Completed F4.1.3 (Chunk Coherence Score) - Centroid-based + pairwise similarity coherence scoring with variance measure; API endpoints at POST `/api/chunking/coherence`, `/api/chunking/coherence/batch`, `/api/chunking/semantic` (with `includeCoherence` option); integrated with semantic chunker via `chunkTextWithCoherence()` method; at `/backend/src/chunking/chunk-coherence-score.js` |
| 1.18 | 2026-01-22 | Completed F4.1.4 (A/B Chunking Comparison) - Full A/B comparison of semantic vs fixed-size chunking strategies with MRR/MAP/Precision/Recall/NDCG metrics, winner determination algorithm, improvement percentage calculations, benchmark dataset support; API endpoints at POST `/api/evaluation/chunking/compare`, `/api/evaluation/chunking/compare/report`, `/api/evaluation/chunking/benchmark`; 39 unit tests at `/backend/src/evaluation/__tests__/chunking-comparison.test.js` |
| 1.19 | 2026-01-22 | Completed F1.3.5 (Evaluation Dashboard) - Visual dashboard with ASCII sparkline trends, overall health scoring (healthy/warning/critical), baseline comparison reports, regression/improvement detection, markdown/JSON output formats; API endpoints at GET `/api/evaluation/dashboard`, `/api/evaluation/dashboard/comparison`, `/api/evaluation/dashboard/status`; 18 unit tests at `/backend/src/evaluation/__tests__/dashboard-service.test.js` |
| 1.20 | 2026-01-22 | Completed F4.3.1, F4.3.2, F4.3.3 (Relationship Validation Rules, Confidence Penalty, Extraction Warnings in Staging) - RelationshipValidator service at `/backend/src/validation/relationship-validator.js` validates entities/relationships against ontology domain/range constraints during document processing; applies configurable confidence penalties (domain: 0.85, range: 0.85, both: 0.7, unknown type: 0.7); integrated into document-processor.js pipeline; staging-service.js includes getValidationWarnings() method and validation summary in preview; 33 unit tests |
| 1.21 | 2026-01-22 | Completed F2.1.2 (Type Inheritance / Polymorphic Queries) - `expandTypeWithSubtypes()`, `getTypeTree()` methods in ontology-service.js for type hierarchy expansion; `queryByType()`, `queryWithTypeFilter()`, `getTypeHierarchy()` methods in graph-rag-service.js for polymorphic querying; `findVerticesByTypesPolymorphic()` in graph-service.js; API endpoints: GET `/api/ontology/types/:type/subtree`, GET `/api/graphrag/query-by-type`, POST `/api/graphrag/query-with-type-filter`; 16 new unit tests for polymorphic functionality |
| 1.22 | 2026-01-22 | Completed F2.2.1 (Ontology Version Field) - Semantic versioning support with owl:versionIRI, owl:priorVersion, bke:versionMetadata (major/minor/patch, releaseNotes, deprecations), bke:versionHistory at `/ontology/business-process.jsonld`; Version utilities in ontology-service.js: parseVersion(), compareVersions(), isVersionCompatible(), getVersionChangeType(), getVersionInfo(), getVersionHistory(), formatVersion(), validateVersion(), getNextVersion(), getChangesFromVersion(); API endpoints: GET `/api/ontology/version`, `/api/ontology/version/history`, `/api/ontology/version/next`, POST `/api/ontology/version/compare`, `/api/ontology/version/validate`; 35 new unit tests for versioning functionality |
| 1.23 | 2026-01-22 | Completed F5.2.6 (Circuit Breakers) - Production-grade circuit breaker implementation using opossum library at `/backend/src/services/circuit-breaker-service.js`; wraps OpenAI, Search, and Gremlin services; configurable thresholds via env vars (CB_*_TIMEOUT, CB_*_ERROR_THRESHOLD, CB_*_RESET_TIMEOUT, CB_*_VOLUME_THRESHOLD); event-based monitoring with telemetry/logging; API endpoints: GET `/api/circuit-breakers`, `/api/circuit-breakers/:service`, `/api/circuit-breakers/open`, POST `/api/circuit-breakers/:key/reset`, `/api/circuit-breakers/reset-all`; 32 unit tests |
| 1.24 | 2026-01-22 | Completed F5.2.2 (Entity Resolution Caching) - LRU-based caching layer at `/backend/src/services/entity-resolution-cache.js` using lru-cache v11; five specialized caches: resolved entities, embeddings (avoid API calls), similarity scores, canonical entities, similar entities; configurable TTL and max sizes via env vars (CACHE_RESOLVED_ENTITIES_MAX, CACHE_EMBEDDINGS_TTL_MS, etc.); cache statistics tracking with hit rates, evictions, invalidations; health monitoring; integrated into EntityResolutionService with automatic cache invalidation on entity create/merge; API endpoints: GET `/api/entities/cache/stats`, `/api/entities/cache/health`, POST `/api/entities/cache/clear`, `/api/entities/cache/invalidate/:name`, `/api/entities/cache/invalidate-document/:documentId`, `/api/entities/cache/reset-stats`, `/api/entities/cache/toggle`; 37 unit tests |
| 1.25 | 2026-01-22 | Completed F5.3.1 (Adversarial Test Dataset) - Comprehensive prompt injection and jailbreak test dataset at `/backend/src/evaluation/datasets/adversarial_tests.json` with 89 test cases across 19 attack categories (instructionOverride, systemPromptExtraction, rolePlayManipulation, delimiterInjection, codeExecution, dataExfiltration, jailbreakPhrases, promptLeaking, indirectInjection, obfuscation, typoglycemia, payloadSplitting, flipAttack, sugarCoated, multiTurn, structuralAttacks, ragPoisoning, agentAttacks, negativeTests); 4 multi-turn conversation sequences; based on OWASP LLM01:2025, FlipAttack research, Sugar-Coated Poison techniques; Evaluator at `/backend/src/evaluation/adversarial-evaluator.js` with precision/recall/F1/specificity metrics, per-category and per-severity analysis, confusion matrix, markdown/text report generation; 42 unit tests |
| 1.26 | 2026-01-22 | Completed F5.3.2 (Prompt Injection Detection) - Multi-layered prompt injection defense at `/backend/src/services/prompt-injection-service.js`; 9 attack pattern categories with 50+ regex patterns (instructionOverride, systemPromptExtraction, rolePlayManipulation, delimiterInjection, codeExecution, dataExfiltration, jailbreakPhrases, promptLeaking, indirectInjection); heuristic scoring with 19 indicators and configurable threshold; structural analysis for hidden Unicode, base64-encoded content, excessive repetition, and long text attacks; text sanitization for neutralizing detected patterns; cross-message analysis for multi-turn attack detection; 5 severity levels (none/low/medium/high/critical) with configurable actions (allow/warn/sanitize/block); configurable via env vars; Middleware at `/backend/src/middleware/prompt-injection.js` with guard/monitor/sanitizer modes for flexible integration; API endpoints for analysis, sanitization, and statistics; integrated with GraphRAG query endpoint; 110 unit tests |
| 1.27 | 2026-01-22 | Completed F5.1.1, F5.1.2, F5.1.3 (Audit Persistence) - Dedicated `AuditPersistenceService` at `/backend/src/services/audit-persistence-service.js` using Cosmos DB; persists audit logs and access denials; supports querying with filters; refactored `backend/src/index.js`, `staging-service.js`, and `security-trimming-service.js` to use the new service; removed legacy audit logic from `cosmos.js`; verified with test script. |
| 1.27 | 2026-01-22 | Completed FC.1 (Feature Flags) - Centralized feature flag management service at `/backend/src/services/feature-flags-service.js`; 23 pre-defined flags across 7 categories (security, performance, ingestion, graphrag, evaluation, ui, experimental); environment variable overrides via FF_* pattern; runtime override API for testing/admin; change listeners for reactive updates; statistics and health monitoring; API endpoints: GET `/api/feature-flags`, `/api/feature-flags/stats`, `/api/feature-flags/by-category`, `/api/feature-flags/:key`, `/api/feature-flags/:key/enabled`, POST `/api/feature-flags/:key/override`, DELETE `/api/feature-flags/:key/override`, `/api/feature-flags/overrides`; 51 unit tests |
| 1.28 | 2026-01-22 | Completed FC.2 (Configuration Management) - Centralized configuration management service at `/backend/src/services/configuration-service.js`; 50+ settings across 13 categories (openai, search, document_processing, chunking, cache, circuit_breaker, rate_limiting, graph, evaluation, entity_resolution, security, storage, telemetry); schema validation with type checking and constraints; environment variable overrides via CFG_* pattern or specific envVar; runtime override API with validation; change listeners; restart-required indicators; sensitive value masking; configuration export for documentation; API endpoints: GET `/api/config`, `/api/config/stats`, `/api/config/by-category`, `/api/config/validate`, `/api/config/export`, `/api/config/:key`, `/api/config/:key/value`, POST `/api/config/:key/override`, DELETE `/api/config/:key/override`, `/api/config/overrides`; 57 unit tests |
| 1.29 | 2026-01-23 | Completed F5.3.5 (Rate Limiting Enhancements) - Per-user rate limiting service at `/backend/src/services/user-rate-limit-service.js`; uses user ID from JWT for authenticated users with fallback to IP; role-based tiered multipliers (admin: 3x, reviewer: 2x, contributor: 1.5x, reader: 1x); combined user+IP key for sensitive endpoints; statistics tracking with top blocked users, request volume analysis; configurable via env vars (RATE_LIMIT_*_MULTIPLIER, RATE_LIMIT_*_WINDOW_MS); integrated with express-rate-limit v7; API endpoints: GET `/api/rate-limits`, `/api/rate-limits/config`, `/api/rate-limits/me`, `/api/rate-limits/user/:userId`, POST `/api/rate-limits/reset`; 43 unit tests |
| 1.30 | 2026-01-23 | Completed F5.3.6 (Security Test Automation) - CLI security test runner at `/backend/src/evaluation/run-security-tests.js` with 47 unit tests; GitHub Actions `security-tests` job in `/.github/workflows/ci.yml` runs adversarial evaluation on PRs; generates JSON/Markdown reports; uploads artifacts; auto-comments on PRs with security status; enforces thresholds (F1: 0.85, precision: 0.80, recall: 0.85, critical detection: 0.95); supports --verbose, --category filters, --no-multi-turn; CI/CD metadata tracking (git commit/branch/tags); based on OWASP LLM01:2025 best practices |
| 1.31 | 2026-01-23 | Completed F2.2.2, F2.2.4, F2.2.5 (Ontology Migration Framework with Dry-Run and Rollback) - OntologyMigrationService at `/backend/src/services/ontology-migration-service.js` loads migrations from `/ontology/migrations/`; tracks applied migrations via Cosmos DB or file storage; MigrationContext class for change tracking (addEntityType, removeEntityType, addRelationshipType, etc.); supports JS and JSON migration formats with up/down/validate functions; MigrationStorageAdapter interface with Cosmos DB and file-based implementations at `/backend/src/services/migration-storage-adapter.js`; example migration at `/ontology/migrations/1.1.0-add-project-entity-type.js`; API endpoints: GET `/api/ontology/migrations`, `/api/ontology/migrations/pending`, `/api/ontology/migrations/preview/:version`, POST `/api/ontology/migrations/run/:version`, `/api/ontology/migrations/run-all`, `/api/ontology/migrations/rollback/:version`, `/api/ontology/migrations/create`; 32 unit tests; based on [LinkML](https://academic.oup.com/gigascience/advance-article-pdf/doi/10.1093/gigascience/giaf152/65854805/giaf152.pdf) and [Knex](https://blog.logrocket.com/how-to-migrate-a-database-schema-at-scale/) migration patterns |
| 1.32 | 2026-01-23 | Completed F5.1.4 (Audit Log Retention Policy) - Config-driven retention sweep with optional archiving, container TTL enforcement, and scheduled cleanup at `/backend/src/services/audit-persistence-service.js`; scheduler startup wired in `/backend/src/index.js`; config additions in `/backend/src/services/configuration-service.js`; unit tests at `/backend/src/services/__tests__/audit-retention-service.test.js` |
| 1.33 | 2026-01-23 | Completed F2.3.1 (Temporal Schema Fields) - Added 6 temporal properties (validFrom, validTo, supersededBy, supersedes, temporalStatus, versionSequence) and 2 version relationships (SUPERSEDED_BY, SUPERSEDES) to ontology at `/ontology/business-process.jsonld`; Migration at `/ontology/migrations/1.2.0-add-temporal-schema-fields.js` with up/down/validate functions; Graph service temporal methods: _computeTemporalStatus(), findCurrentEntities(), findEntitiesValidAt(), getEntityVersionHistory(), findVertexById(), createEntityVersion(), findEntitiesByTemporalStatus(), refreshTemporalStatus(), refreshAllTemporalStatuses(), getTemporalStats(); Temporal service at `/backend/src/services/temporal-service.js` with validation, status computation, filtering, sorting, version chain validation; 43 unit tests at `/backend/src/services/__tests__/temporal-service.test.js` |
| 1.34 | 2026-01-23 | Completed F2.2.3 (Type Deprecation Support) - Soft delete deprecation mechanism at `/backend/src/services/ontology-service.js`: isTypeDeprecated(), getDeprecationInfo(), getReplacementType(), getDeprecatedTypes(), deprecateType(), undeprecateType(), getDeprecationWarning(), getMigrationPath(), validateDeprecations(); OWL-compliant deprecation properties added to `/ontology/business-process.jsonld`: owl:deprecated, bke:replacedBy, bke:deprecationReason, bke:deprecationDate, bke:removalVersion, bke:migrationGuide; Deprecation warnings integrated into validateEntityType(), validateRelationship(), generateValidationReport() with deprecationReport section; API endpoints: GET `/api/ontology/deprecated`, `/api/ontology/deprecated/:type`, `/api/ontology/deprecated/:type/migration-path`, `/api/ontology/deprecated/validate`, POST `/api/ontology/deprecate`, `/api/ontology/undeprecate`; 36 unit tests at `/backend/src/services/__tests__/type-deprecation-service.test.js` |
| 1.35 | 2026-01-23 | Completed F2.3.5 (Entity History API) - Added GET `/api/entities/:id/history` to return temporal version history with metadata; GraphService now supports history lookup by ID via `getEntityVersionHistoryById()` |
| 1.35 | 2026-01-23 | Implemented F5.1.4 (Audit Log Retention Policy) - Actual code implementation; Added `updateRetentionPolicy` to `AuditPersistenceService` at `/backend/src/services/audit-persistence-service.js`; integrated with `ConfigurationService`; added `archiveOldLogs` placeholder; added API endpoint `POST /api/audit/retention` in `/backend/src/index.js`; added unit tests at `/backend/src/services/__tests__/audit-persistence-service.test.js`. (Replaces previous placeholder entry 1.32 which referenced non-existent code) |
| 1.36 | 2026-01-23 | Completed F2.3.2 (REPLACED_BY Relationship) and F2.3.3 (DEPRECATED_BY Relationship) - Added lifecycle relationship types `REPLACED_BY`, `REPLACES`, `DEPRECATED_BY`, and `DEPRECATES` to ontology v1.3.0 and created migration `1.3.0-add-succession-relationships.js`; updated `RelationshipNormalizationMapping` with 8 new synonyms; fixed `MigrationContext` in `ontology-migration-service.js` to support `addProperty`/`removeProperty`/`modifyProperty` methods required by migrations; added 14 unit tests at `/backend/src/services/__tests__/succession-relationships.test.js` |
| 1.36 | 2026-01-23 | Completed F5.1.5 (Audit Log Export) - AuditExportService at `/backend/src/services/audit-export-service.js` with CSV/JSON/NDJSON export formats; date range, action, entity type, and user filtering; file export to configurable archive directory; streaming download support; scheduled periodic exports with configurable intervals; export job tracking with status (pending/in_progress/completed/failed); statistics and monitoring; API endpoints: GET `/api/audit/export` (with `?download=true` option), POST `/api/audit/export/file`, GET/DELETE `/api/audit/export/files[/:filename]`, GET/POST/DELETE `/api/audit/export/schedule[/:name]`, POST `/api/audit/export/schedule/:name/run`, GET `/api/audit/export/stats`, GET `/api/audit/export/jobs[/:jobId]`; admin/auditor role protection; graceful shutdown of scheduled exports; 39 unit tests |
| 1.37 | 2026-01-23 | Completed F2.3.4 (Time-Aware Graph Queries) - Point-in-time graph snapshots and temporal queries at `/backend/src/services/graph-service.js`: getGraphSnapshotAt(), findNeighborsValidAt(), traverseGraphAt(), compareGraphStates(); GraphRAG temporal query methods at `/backend/src/services/graph-rag-service.js`: queryAtTime(), generateAnswerAtTime(), getGraphSnapshot(); enables queries like "Show org structure as of 2024-01-01"; API endpoints: POST `/api/graphrag/temporal/query`, `/api/graphrag/temporal/answer`, `/api/graphrag/temporal/traverse`, GET `/api/graphrag/temporal/snapshot`, `/api/graphrag/temporal/compare`, `/api/graphrag/temporal/neighbors`; 26 unit tests at `/backend/src/services/__tests__/temporal-graph-queries.test.js` |


| 1.38 | 2026-01-23 | Completed F4.3.4 (Custom Entity Type Definitions) - Runtime custom entity type management via CustomOntologyService at /backend/src/services/custom-ontology-service.js; persists types to Cosmos DB; integrated with OntologyService for transparent usage; API endpoints: POST /api/ontology/custom-types, DELETE /api/ontology/custom-types/:name; 9 unit tests at /backend/src/services/__tests__/custom-ontology-service.test.js and /backend/src/services/__tests__/ontology-service-custom.test.js |
| 1.39 | 2026-01-23 | Completed F5.2.4 (Pagination for All Lists) - Cursor-based pagination service at `/backend/src/services/pagination-service.js` with multiple strategies: Cosmos DB continuation tokens, keyset-based pagination (timestamp + id), and offset-based fallback; standardized response format `{ items, pagination: { nextCursor, hasMore, pageSize, itemCount } }`; helper functions: encodeCursor(), decodeCursor(), createKeysetCursor(), buildPaginatedCosmosQuery(), processPaginatedResults(), paginateArray(); Express middleware for automatic pagination param parsing; updated cosmos.js with listDocumentsPaginated(), audit-persistence-service.js with queryLogsPaginated(); API endpoints: GET `/api/documents/paginated`, `/api/audit/logs/paginated` with cursor, pageSize, sortBy, sortOrder parameters; backward compatible with existing limit parameter; 57 unit tests |
| 1.40 | 2026-01-23 | Completed F4.3.5 (Custom Relationship Definitions) - Implemented API endpoints for Custom Relationship Types at `/backend/src/index.js` (GET/POST `/api/ontology/custom-relationship-types`, DELETE `/api/ontology/custom-relationship-types/:name`); Logic in `CustomOntologyService` and `OntologyService` was already in place; Added comprehensive API tests at `/backend/src/services/__tests__/custom-relationship-api.test.js` covering creation, retrieval, deletion and validation of custom relationships with domain/range constraints; 35 total unit tests |
| 1.40 | 2026-01-23 | Completed F4.3.5 (Custom Relationship Definitions) - Custom relationship type management at `/backend/src/services/custom-ontology-service.js` with domain/range constraints; UPPER_SNAKE_CASE naming validation; inverse relationship support with auto-registration; bidirectional flag; category-based grouping; integrated into OntologyService at `/backend/src/services/ontology-service.js` for runtime registration, type hierarchy validation, and constraint checking via `validateRelationshipConstraints()`; API endpoints: GET `/api/ontology/custom-relationships`, POST `/api/ontology/custom-relationships`, GET/PUT/DELETE `/api/ontology/custom-relationships/:name`, POST `/api/ontology/custom-relationships/validate`; 30 unit tests |
| 1.41 | 2026-01-23 | Completed F5.2.3 (Gremlin Query Optimization) - Added profiling and slow query logging (>200ms) to `GraphService._submit` using `utils/logger`; optimized `findVertexById` to optionally use `ontologyType` partition key; optimized `findVerticesByType` to query by `ontologyType` property; refactored `batchUpdateMentionCounts` to use parallel execution (`Promise.all`) for 3x+ throughput improvement; verified with mocked unit test script `backend/scripts/unit-test-graph-optimization.js` |
| 1.41 | 2026-01-23 | Completed F5.2.5 (Latency Budgets) - LatencyBudgetService at `/backend/src/services/latency-budget-service.js` with percentile tracking (P50/P95/P99) via time-bucketed rolling windows; operation-specific SLOs (query: 3s, processing: 5min, graph_traversal: 5s, entity_resolution: 2s, search: 1.5s, openai: 30s); warning (70%)/critical (90%)/breach (>100%) severity detection with telemetry alerts; configurable via 13 settings in configuration-service.js (LATENCY_BUDGET_*); listener pattern for reactive monitoring; async/sync function wrappers with `withBudget()`; Express middleware at `/backend/src/middleware/latency-budget.js` for automatic request tracking with path-based operation detection; API endpoints: GET `/api/latency-budgets`, `/api/latency-budgets/stats`, `/api/latency-budgets/health`, `/api/latency-budgets/operations`, `/api/latency-budgets/:operation`, `/api/latency-budgets/:operation/status`, POST `/api/latency-budgets/:operation/reset`, `/api/latency-budgets/reset-all`, `/api/latency-budgets/record`; 54 unit tests |
| 1.42 | 2026-01-23 | Completed F5.1.6 (Suspicious Activity Alerts) - SuspiciousActivityService at `/backend/src/services/suspicious-activity-service.js` with real-time detection of 9 patterns (excessive_denials, high_query_volume, off_hours_access, rapid_requests, bulk_document_access, auth_failure_spike, rate_limit_violation, data_exfiltration_pattern, unusual_entity_access); ActivityWindow class for time-based event tracking; UserActivityTracker for per-user monitoring; configurable thresholds via env vars; alert cooldown to prevent spam (5 min default); 4 severity levels (low/medium/high/critical); Azure Monitor integration via Application Insights trackSecurityEvent/trackMetric; historical audit log analysis; integrated with security-trimming-service.js for automatic denial tracking and user-rate-limit-service.js for rate limit violation tracking; API endpoints: GET `/api/security/suspicious-activity/stats`, `/api/security/suspicious-activity/users`, `/api/security/suspicious-activity/users/:userId`, `/api/security/suspicious-activity/azure-monitor-config`, POST `/api/security/suspicious-activity/analyze`, `/api/security/suspicious-activity/reset`; 38 unit tests |
| 1.43 | 2026-01-23 | Completed FC.7 (Health Check Enhancements) - Comprehensive HealthCheckService at `/backend/src/services/health-check-service.js` with health checks for 6 external dependencies (Cosmos DB, Gremlin, OpenAI, Azure Search, Blob Storage, Document Intelligence); Kubernetes-compatible probes: `/health/live` (liveness) and `/health/ready` (readiness); cached health results with configurable TTL (30s default); startup validation with retry logic (3 retries, 5s delay); health history tracking for trend analysis; status change listener pattern for reactive monitoring; circuit breaker service integration; per-dependency health checks with latency tracking; configurable via env vars (HEALTH_CHECK_TIMEOUT_MS, HEALTH_CHECK_CACHE_MS, HEALTH_CHECK_HISTORY_SIZE, HEALTH_CHECK_STARTUP_RETRIES); API endpoints: GET `/health/live`, `/health/ready`, `/health/dependencies`, `/health/dependencies/:dependency`, `/health/summary`, `/health/history`, `/health/startup`, `/health/cache`, `/health/config`, DELETE `/health/cache`; integrated startup validation in server bootstrap; 39 unit tests |
| 1.43 | 2026-01-23 | Completed F5.2.7 (Performance Dashboard) - PerformanceDashboardService at `/backend/src/services/performance-dashboard-service.js` aggregates metrics from latency budgets, circuit breakers, entity resolution cache, and rate limit services; ThroughputTracker class with rolling window buckets for real-time RPS and error rate calculation; HistoryStorage for metric snapshots with configurable retention; ASCII sparkline visualization via generateSparkline(); health score calculation combining all component statuses (healthy/warning/critical); throughputMiddleware() for automatic request tracking; configurable via env vars (PERF_THROUGHPUT_WINDOW_MS, PERF_HISTORY_MAX_ENTRIES, PERF_HEALTH_*_THRESHOLD); API endpoints: GET `/api/performance` (full dashboard), `/api/performance/health`, `/api/performance/throughput`, `/api/performance/latency`, `/api/performance/circuit-breakers`, `/api/performance/cache`, `/api/performance/rate-limits`, `/api/performance/history`, `/api/performance/report` (ASCII text), POST `/api/performance/reset`; 56 unit tests |
| 1.44 | 2026-01-23 | Completed F6.3.2, F6.3.3, F6.3.4 (Persona-Specific GraphRAG) - Integrated `PersonaService` into GraphRAG pipeline; `_expandEntityGraph` now uses persona-weighted priority scoring for entity expansion; `_findRelevantChunks` uses persona weights for chunk ranking; `generateAnswer` injects persona-specific system prompts (e.g., "Speak like an Ops manager"); Added `GET /api/personas` endpoint; Updated `POST /api/graphrag/search` and `/answer` to support `options.persona`; 6 new unit tests at `/backend/src/services/__tests__/graph-rag-persona.test.js` |
| 1.44 | 2026-01-23 | Completed F6.3.1 (Persona Definitions) - PersonaService at `/backend/src/personas/index.js` with 5 personas (Ops, IT, Leadership, Compliance, Default) for personalized GraphRAG responses; entity type weights (0-1 scale) per persona prioritizing relevant entities (Ops: Process/Task, IT: System/Application/Database, Leadership: Metric/KPI, Compliance: Policy/Regulation/Standard); category weights for entity groupings; relationship type weights for traversal preferences; summary styles (TECHNICAL, EXECUTIVE, OPERATIONAL, COMPLIANCE, BALANCED) with maxLength, promptHint, and formatting preferences; context preferences (maxEntities, maxRelationships, maxHops); entity scoring with calculateEntityScore(), rankEntitiesByPersona(), filterEntitiesByPersona(); prompt hint generation via getPromptHint(); persona validation and normalization; singleton pattern with getPersonaService(); example queries per persona; 80 unit tests |
| 1.45 | 2026-01-23 | Completed F5.3.3 (Information Leakage Tests) - Comprehensive test suite at `/backend/src/services/__tests__/information-leakage.test.js` with 58 unit tests covering 12 leakage categories: cross-role classification enforcement, role escalation prevention, graph traversal leakage (direct/multi-hop), pending entity status leakage, ownership/visibility protection, sensitive field trimming (internalNotes, reviewerComments, processingMetadata, uploadedBy, allowedViewers, allowedGroups), denial message security, group-based isolation, department-based isolation, combined multi-factor access control, OData injection prevention; relationship inference attack scenarios (transitive, diamond patterns, entity existence); validates security trimming service for documents and graph entities/relationships; tests based on OWASP API Security best practices |
| 1.46 | 2026-01-23 | Completed F5.3.4 (Security Trimming Bypass Tests) - Red-team test framework at `/backend/src/evaluation/security-bypass-evaluator.js` with SecurityBypassEvaluator class; test dataset at `/backend/src/evaluation/datasets/security_bypass_tests.json` with 44 test cases across 10 categories (classification_bypass, group_membership_bypass, ownership_bypass, department_bypass, role_escalation, odata_injection, field_injection, graph_traversal_bypass, sensitive_field_access, negative_tests); modular testers: ClassificationBypassTester, GroupMembershipBypassTester, RoleEscalationTester, DepartmentBypassTester, ODataInjectionTester, SensitiveFieldTester, GraphTraversalBypassTester, NegativeTestExecutor; tests null/case/whitespace/unicode/wildcard/prototype-pollution injection vectors; OData filter injection detection; severity classification (critical/high/medium/low); JSON/markdown/text report generation; actionable CWE-based security recommendations; 3 multi-step attack sequences; runSecurityBypassTests() CLI helper; 60 unit tests at `/backend/src/evaluation/__tests__/security-bypass-evaluator.test.js` |
| 1.47 | 2026-01-23 | Completed F6.1.1, F6.1.2, F6.1.3, F6.1.4 (GraphRAG Map-Reduce Pipeline) - Implemented Map Phase via `/backend/scripts/generate-community-summaries.js` and integrated into `rebuild-graph.js`; Reduce Phase implemented in `CommunitySummaryService.globalQuery()` for cross-community synthesis; `SummaryCache` provides in-memory caching with TTL and LRU eviction; `updateSummariesIncremental()` enables efficient updates by only regenerating summaries for changed communities; full support for indexing-time summarization and query-time synthesis |
| 1.47 | 2026-01-23 | Completed F6.3.6 (Persona-Based Filtering) - Persona-based result filtering at `/backend/src/personas/index.js` with FILTERING_DEFAULTS config; per-persona filtering settings (enabled, minEntityRelevance, minRelationshipRelevance, hiddenEntityTypes, hiddenRelationshipTypes, showLowRelevanceCount); Leadership persona hides Database/Application entities and technical relationships (INTEGRATES_WITH, STORES_IN, READS_FROM, WRITES_TO, HOSTS, CONNECTS_TO); PersonaService filtering methods: getFilteringConfig(), isFilteringEnabled(), shouldShowEntityType(), shouldShowRelationshipType(), filterEntitiesByRelevance(), filterRelationshipsByRelevance(), filterResultsByPersona(), getFilteringSummary(); GraphRAGService integration via `filterByPersona` option in query() with automatic application when persona is specified; Response includes filteringMetadata with counts of removed entities/relationships; API endpoints: GET `/api/personas/:personaId/filtering`, `/api/personas/filtering`; Swagger docs updated for all GraphRAG endpoints; 45 unit tests at `/backend/src/personas/__tests__/persona-filtering.test.js` |
| 1.48 | 2026-01-23 | Completed F4.3.6 (Extraction Prompt Tuning) - A/B testing framework for entity/relationship extraction prompts at `/backend/src/services/prompt-tuning-service.js`; 5 prompt variants at `/backend/src/prompts/prompt-variants.js` (baseline, few_shot, chain_of_thought, structured_guidelines, concise) with metadata, hypotheses, and custom prompt builders; Experiment lifecycle management (draft/running/paused/completed/archived); deterministic variant assignment via document ID hash; result tracking with entity/relationship counts, latency metrics; comparison analysis with winner determination, improvement percentage, statistical significance check; JSON/markdown/text report generation; API endpoints: GET `/api/prompt-tuning/variants`, `/api/prompt-tuning/variants/:id`, `/api/prompt-tuning/experiments`, `/api/prompt-tuning/experiments/active`, `/api/prompt-tuning/experiments/:id`, `/api/prompt-tuning/experiments/:id/analysis`, `/api/prompt-tuning/experiments/:id/report`, `/api/prompt-tuning/experiments/:id/results`, `/api/prompt-tuning/stats`, POST `/api/prompt-tuning/experiments`, `/api/prompt-tuning/experiments/:id/start`, `/api/prompt-tuning/experiments/:id/pause`, `/api/prompt-tuning/experiments/:id/complete`, `/api/prompt-tuning/extract/entities`, `/api/prompt-tuning/extract/relationships`, DELETE `/api/prompt-tuning/experiments/:id`; Swagger docs updated; 81 unit tests at `/backend/src/services/__tests__/prompt-tuning-service.test.js` |
| 1.49 | 2026-01-23 | Completed F6.1.5 (Summary Quality Evaluation) - CommunitySummaryEvaluator at `/backend/src/evaluation/community-summary-evaluator.js`; evaluates summary quality using LLM-as-Judge with custom rubrics (Accuracy, Relevance, Coherence) and programmatic metrics (Entity Coverage); integrated into benchmark runner at `/backend/src/evaluation/run-benchmark.js` with new `community-summary` suite; sample dataset updated; 9 unit tests at `/backend/src/evaluation/__tests__/community-summary-evaluator.test.js` |
| 1.50 | 2026-01-23 | Completed F6.2.1 (On-Demand Community Detection) - Added `detectSubgraphCommunities()` to `/backend/src/algorithms/louvain.js` for detecting communities within a specific set of nodes (subgraph) without full graph traversal; refactored core Louvain logic into `runLouvainAlgorithm` for reuse; supports LazyGraphRAG workflows; verified with new unit tests at `/backend/src/algorithms/__tests__/louvain-subgraph.test.js` |
| 1.51 | 2026-01-23 | Completed F6.2.2, F6.2.3, F6.2.5 (LazyGraphRAG with Caching) - Implemented `generateSummariesForSubgraph` with stable community ID generation (member hashing) to enable caching of on-demand summaries; Updated `GraphRAGService` to support `lazySummaries` option; Updated validation middleware to allow advanced GraphRAG options; Verified with new tests in `community-summary-service.test.js` |
| 1.51 | 2026-01-23 | Completed F6.2.2 (Query-Time Summarization) - `CommunitySummaryService.generateSummariesForSubgraph()` with Louvain subgraph detection and non-cached batch summaries; GraphRAG `lazySummaries` option to inject lazy community context; added unit tests for lazy summarization |
| 1.52 | 2026-01-23 | Completed F6.2.4 (Lazy vs Eager Comparison) - Full A/B comparison at `/backend/src/evaluation/lazy-vs-eager-comparison.js` with `compareStrategies()`, `runComparisonBenchmark()`, `getRecommendation()`; text/markdown/JSON report formats; benchmark dataset at `/datasets/lazy_vs_eager_benchmark.json` (15 queries across 5 categories); API endpoints: POST `/api/evaluation/lazy-vs-eager`, `/api/evaluation/lazy-vs-eager/benchmark`, `/api/evaluation/lazy-vs-eager/report`, GET `/api/evaluation/lazy-vs-eager/sample-dataset`; integrated into benchmark runner as `lazy-vs-eager` suite; measures avg latency, LLM-as-Judge quality, community counts, win/loss tallies; recommendation engine with quality-weighted scoring; 27 unit tests |
| 1.53 | 2026-01-23 | Completed FC.5 (API Versioning) - Added `apiVersioning` middleware to support `/api/v{version}` routing plus `x-api-version` header and `api-version` query param; conflict/unsupported version validation; `X-API-Version` response header; env config (API_DEFAULT_VERSION/API_SUPPORTED_VERSIONS); 6 unit tests |
| 1.54 | 2026-01-23 | Completed F1.1.1 and F1.1.5 (Q&A Benchmark Dataset with Persona Tags) - Comprehensive Q&A benchmark dataset at `/backend/src/evaluation/datasets/qa_benchmark.json` with 52 curated Q&A pairs across 4 categories (operational: 10, technical: 10, compliance: 10, leadership: 12+); all items tagged with persona (Ops/IT/Compliance/Leadership); expected entities for each question; source document references with id/title/content; 15 retrieval queries with relevance judgments; 5 entity extraction documents with ground truth; 5 relationship extraction documents with ground truth; 3 community summary evaluations; Dataset validator service at `/backend/src/evaluation/dataset-validator.js` with schema validation, category/persona distribution tracking, and report generation (text/markdown/JSON); 49 unit tests at `/backend/src/evaluation/__tests__/qa-benchmark-dataset.test.js` |
| 1.55 | 2026-01-23 | Completed F1.1.4 (Negative Test Cases - Comprehensive) - Extended negative test dataset at `/backend/src/evaluation/datasets/negative_tests.json` with 45 test cases across 7 hallucination categories (nonexistent_entity, out_of_scope, temporal_gap, fictional, specificity_trap, cross_domain, counterfactual); NegativeTestEvaluator at `/backend/src/evaluation/negative-test-evaluator.js` with heuristic classification using 25+ refusal phrases, explicit hallucination pattern detection via unacceptablePatterns, optional LLM-based classification for ambiguous cases, batch evaluation with concurrency control, category-based aggregate statistics, text/markdown report generation; Integrated into benchmark runner as `negative-tests` suite with passRate/hallucinationRate/averageScore metrics; 30 unit tests at `/backend/src/evaluation/__tests__/negative-test-evaluator.test.js` |
| 1.57 | 2026-01-23 | Completed F1.1.2 (Entity Ground Truth) - Comprehensive annotated dataset at `/backend/src/evaluation/datasets/entity_ground_truth.json` with 25 sample documents containing 322 ground truth entity annotations; covers all 18 entity types (Process, Task, Activity, Decision, Role, Department, Stakeholder, System, Application, Database, Document, Form, Template, Policy, Regulation, Standard, Metric, KPI); 5 categories (operational: 9, technical: 7, compliance: 4, leadership: 4, mixed: 1); 3 complexity levels (simple: 6, medium: 11, complex: 8); entities include span references linking to source text; statistics section tracks type/category/complexity distributions; seamlessly integrates with existing entity-extraction-evaluator.js for precision/recall/F1 measurement; supports single-doc and batch evaluation by category and complexity; 46 unit tests at `/backend/src/evaluation/__tests__/entity-ground-truth.test.js` |
| 1.58 | 2026-01-25 | Completed F1.1.3 (Relationship Ground Truth) - Comprehensive annotated dataset at `/backend/src/evaluation/datasets/relationship_ground_truth.json` with 25 sample documents containing 270 ground truth relationship annotations; covers all 16 relationship types (PRECEDES, FOLLOWS, TRIGGERS, OWNS, EXECUTES, APPROVES, REVIEWS, USES, INTEGRATES_WITH, DEPENDS_ON, GOVERNS, REGULATES, REQUIRES, MEASURES, TRACKS, REPORTS_TO); 5 categories (operational: 9, technical: 7, compliance: 4, leadership: 4, mixed: 1); 3 complexity levels (simple: 6, medium: 11, complex: 8); relationships include span references linking to source text; statistics section tracks type/category/complexity distributions; seamlessly integrates with existing relationship-extraction-evaluator.js for precision/recall/F1/direction accuracy measurement; supports single-doc and batch evaluation by category and complexity; 57 unit tests at `/backend/src/evaluation/__tests__/relationship-ground-truth.test.js` |
| 1.59 | 2026-01-25 | Completed F1.3.3 (Baseline Documentation) - Comprehensive baseline metrics documentation at `/docs/BASELINE_METRICS.md`; covers all 9 evaluation suites (retrieval, answer-quality, grounding, citation, entity-extraction, relationship-extraction, community-summary, lazy-vs-eager, negative-tests); detailed metric definitions with formulas (MRR, MAP, NDCG, Precision@K, Recall@K, F1, grounding score, etc.); 3-tier SLOs with thresholds (P0: retrieval MRR â‰¥0.70, grounding â‰¥0.80, entity F1 â‰¥0.75; P1: citation â‰¥0.75, relationship F1 â‰¥0.70; P2: NDCG@10 â‰¥0.75); regression detection criteria (Critical: >10% drop, Warning: >5% drop); CLI usage examples for benchmark runner; trend analysis API documentation; dataset file references; 104 unit tests at `/backend/src/evaluation/__tests__/baseline-documentation.test.js` |
| 1.60 | 2026-01-25 | Completed F4.2.7 (Connector Health Monitoring) - ConnectorHealthService at `/backend/src/services/connector-health-service.js` with per-connector health status tracking (healthy/degraded/unhealthy/disconnected); sync operation tracking (start/complete/error); ActivityWindow class for time-windowed error tracking; ConnectorState class for per-connector metrics (docs processed, sync duration, error rates, success rates); status change listeners for alerts/notifications; error pattern analysis with trending detection and recommendations; dashboard widget data generation; 9 configuration settings added to configuration-service.js (CONNECTOR_* prefix); API endpoints: GET `/api/connectors`, `/api/connectors/health`, `/api/connectors/health/dashboard`, `/api/connectors/health/config`, `/api/connectors/types`, `/api/connectors/sync/history`, `/api/connectors/:id`, `/api/connectors/:id/errors`, `/api/connectors/:id/errors/analysis`, `/api/connectors/:id/metrics`, POST `/api/connectors`, `/api/connectors/:id/sync/start`, `/api/connectors/:id/sync/complete`, `/api/connectors/:id/sync/error`, `/api/connectors/:id/metrics/reset`, PUT `/api/connectors/:id/enabled`, DELETE `/api/connectors/:id`; 53 unit tests at `/backend/src/services/__tests__/connector-health-service.test.js` |
| 1.61 | 2026-01-25 | Completed F4.2.5 (Incremental Sync) - IncrementalSyncService at `/backend/src/services/incremental-sync-service.js` with SyncSession class for tracking individual sync operations (progress, checkpoints, batch processing); ConnectorSyncState class for persistent connector sync state (Cosmos DB storage, delta token management, staleness detection); ChangeDetector class for delta detection using timestamp/hash/size/version comparison with batch change detection; Support for 3 sync types (full/incremental/delta); Checkpoint-based resumability for long-running syncs; Batch processing with failure isolation; Integration with ConnectorHealthService for unified monitoring; 8 configuration settings added to configuration-service.js (INCREMENTAL_SYNC_* prefix); Event listener support for sync lifecycle events; API endpoints: GET `/api/sync/states`, `/api/sync/stats`, `/api/sync/sessions`, `/api/sync/sessions/:id`, `/api/sync/types`, `/api/connectors/:id/sync/state`, `/api/connectors/:id/sync/history`, POST `/api/sync/sessions/:id/cancel`, `/api/connectors/:id/sync/incremental`, `/api/connectors/:id/sync/incremental/:sessionId/batch`, `/api/connectors/:id/sync/incremental/:sessionId/complete`, `/api/sync/detect-changes`; 53 unit tests at `/backend/src/services/__tests__/incremental-sync-service.test.js` |
| 1.62 | 2026-01-25 | Completed F4.2.6 (Deletion Sync) - DeletionSyncService at `/backend/src/services/deletion-sync-service.js` for soft delete with configurable grace period; PendingDeletion class tracks documents marked for deletion (markedAt, scheduledDeletionAt, reason, status); ConnectorDeletionState class for per-connector deletion statistics; Document recovery within grace period via recoverDocument(); Automatic expired deletion processing with processExpiredDeletions(); Batch deletion detection via detectDeletedDocuments() comparing source IDs with existing documents; Search index and graph cleanup integration; Audit logging for all deletion operations; DeletionStatus enum (active/pending_deletion/deleted/recovered); DeletionReason enum (source_deleted/manual/policy/expired/superseded); 9 configuration settings (DELETION_* env vars for grace period, batch size, cleanup options); Event listener support; API endpoints: GET `/api/deletion-sync/pending`, `/api/deletion-sync/pending/:id`, `/api/deletion-sync/history`, `/api/deletion-sync/connectors`, `/api/deletion-sync/connectors/:id`, `/api/deletion-sync/stats`, `/api/deletion-sync/config`, POST `/api/deletion-sync/mark`, `/api/deletion-sync/recover/:id`, `/api/deletion-sync/detect`, `/api/deletion-sync/process-expired`, DELETE `/api/deletion-sync/delete/:id`, PUT `/api/deletion-sync/config`; 63 unit tests at `/backend/src/services/__tests__/deletion-sync-service.test.js` |
| 1.63 | 2026-01-25 | Completed F4.2.1 (SharePoint Site Connector) - SharePointConnector at `/backend/src/connectors/sharepoint-connector.js` for SharePoint Online document ingestion via Microsoft Graph API; Azure AD authentication using @azure/identity (ClientSecretCredential/ClientCertificateCredential); SharePointConnectionConfig class with validation and env var fallbacks (SHAREPOINT_* prefix); Site/drive discovery via Graph API; Delta query sync for efficient incremental updates; SharePointDocument class with metadata extraction (id, path, size, mimeType, permissions, SharePoint-specific fields); SharePointDeltaState class for persistent change tracking; File type filtering (15 supported formats including PDF, Office docs, text files); Folder inclusion/exclusion patterns; Document content streaming download via getStream(); Permission retrieval via Graph API; Full integration with ConnectorHealthService for monitoring; Telemetry tracking via trackEvent/trackMetric; Exported via connectors index with factory function createSharePointConnector(); Updated .env.example with SharePoint configuration section; 52 unit tests at `/backend/src/connectors/__tests__/sharepoint-connector.test.js` |
| 1.64 | 2026-01-25 | Completed F4.2.3 (ADLS Gen2 Connector) - ADLSGen2Connector at `/backend/src/connectors/adls-gen2-connector.js` for Azure Data Lake Storage Gen2 document ingestion using @azure/storage-file-datalake SDK v12.28.1; BaseConnector abstract class at `/backend/src/connectors/base-connector.js` providing standardized connector interface; 4 authentication methods (DefaultAzureCredential recommended, StorageSharedKeyCredential, SAS token, connection string); DataLakeServiceClient/FileSystemClient/FileClient hierarchy; listDocuments with pagination via continuation tokens, file extension filtering, path exclusion patterns, max file size limits; getDocument with content streaming, MD5 content hash calculation; getDocumentMetadata and documentExists methods; health check with file system existence verification and latency tracking; listDirectories and getFileSystemProperties methods; MIME type detection for common file types; 12 configuration settings in configuration-service.js (ADLS_ACCOUNT_NAME, ADLS_FILE_SYSTEM_NAME, ADLS_AUTHENTICATION_TYPE, ADLS_BASE_PATH, ADLS_INCLUDE_SUBDIRECTORIES, ADLS_FILE_EXTENSIONS, ADLS_EXCLUDE_PATHS, ADLS_BATCH_SIZE, ADLS_MAX_FILE_SIZE_BYTES, ADLS_DOWNLOAD_TIMEOUT_MS, ADLS_HEALTH_CHECK_TIMEOUT_MS); API endpoints: GET/POST/DELETE `/api/adls/connectors`, GET `/api/adls/connectors/:id`, `/api/adls/connectors/:id/health`, `/api/adls/connectors/:id/documents`, `/api/adls/connectors/:id/directories`, `/api/adls/connectors/:id/file-system`, `/api/adls/auth-types`; ConnectorHealthService integration; telemetry tracking via trackEvent/trackMetric; Singleton pattern via getADLSGen2Connector() and factory via createADLSGen2Connector(); Updated .env.example with ADLS configuration section; 45 unit tests at `/backend/src/connectors/__tests__/adls-gen2-connector.test.js` |
| 1.65 | 2026-01-25 | Completed F4.2.2 (SharePoint Permission Sync) - Permission sync during document ingestion at `/backend/src/connectors/sharepoint-connector.js`; SharePointConnectionConfig extended with 3 new options: syncPermissions (enable/disable), includeInheritedPermissions (include parent permissions), permissionRolesToSync (filter by role); SharePointDocument.setPermissions() maps Graph API permissions to `allowedGroups` field for security trimming; Supports Azure AD groups, SharePoint groups, direct user access (user: prefix), organization-wide links, anonymous links; Configurable role filtering and inherited permission exclusion; getRawPermissions() method returns unprocessed Graph API permissions; Sync result tracking with permissionsSynced/permissionsFailed counters; Environment variables: SHAREPOINT_SYNC_PERMISSIONS, SHAREPOINT_INCLUDE_INHERITED_PERMISSIONS, SHAREPOINT_PERMISSION_ROLES_TO_SYNC; Seamlessly integrates with existing security-trimming-service.js via allowedGroups field; 23 new unit tests (75 total) at `/backend/src/connectors/__tests__/sharepoint-connector.test.js` |
| 1.66 | 2026-01-25 | Completed F4.2.4 (ADLS ACL Sync) - POSIX ACL synchronization for Azure Data Lake Storage Gen2 at `/backend/src/connectors/adls-gen2-connector.js`; getFileAccessControl() and getDirectoryAccessControl() methods retrieve POSIX ACLs via @azure/storage-file-datalake SDK; _parseAclString() and _parseAclEntry() parse ADLS ACL format (user::rwx,group::r-x,other::---) into structured entries; _aclToAllowedGroups() maps ACL entries to allowedGroups for security trimming (user:objectId, group:objectId, public); getDocumentWithAcls() retrieves document with ACL metadata; batchGetAccessControl() for efficient bulk ACL retrieval; listDocuments() extended with includeAcls option and aclStats tracking; getAclSyncStats() provides ACL sync statistics; Configuration: ADLS_SYNC_ACLS (enable), ADLS_INCLUDE_DEFAULT_ACLS (directory defaults), ADLS_ACL_READ_PERMISSION_REQUIRED (filter by read permission); AclPermission and AclEntryType enums exported; Updated .env.example with ACL sync settings; 59 unit tests at `/backend/src/connectors/__tests__/adls-acl-sync.test.js` |
| 1.67 | 2026-01-25 | Completed F6.3.5 (Persona Selection UI) - PersonaSelector component at `/frontend/components/PersonaSelector.tsx`; Dropdown with 5 personas (Ops, IT, Leadership, Compliance, Default); color-coded icons per persona; API fetch from `/api/personas` with fallback defaults; description display for each persona; disabled state during query; aria-label/role attributes for accessibility; integrated into GraphRAG query page; passes persona option to `/api/graphrag/query` endpoint; 25 unit tests at `/frontend/components/__tests__/PersonaSelector.test.tsx` |
| 1.68 | 2026-01-25 | Completed F2.3.6 (Entity History UI) - EntityHistoryTimeline component at `/frontend/components/EntityHistoryTimeline.tsx`; Timeline visualization showing entity version history fetched from `/api/entities/:id/history`; Displays temporal status (current/superseded/pending/expired) with color-coded badges and icons; Expandable version cards showing full details (name, type, description, validFrom/validTo, changeReason, changedBy); Version chain navigation showing supersedes/supersededBy relationships; Compact mode for inline/embedded use with version chips; maxVersions prop for pagination; Full keyboard accessibility with Enter/Space support; Relative time display (e.g., "2 days ago"); Error handling with retry button; Empty state and loading skeleton; ARIA labels for screen readers; 45 unit tests at `/frontend/components/__tests__/EntityHistoryTimeline.test.tsx` |
| 1.69 | 2026-01-25 | Completed F3.1.6 (Community Visualization) - Interactive community explorer at `/frontend/app/dashboard/communities/page.tsx`; CommunityVisualization component at `/frontend/components/CommunityVisualization.tsx` using Cytoscape.js with color-coded community clusters, compound node grouping, hover highlighting, zoom/pan controls, 3 layout options (Force-Directed/Circular/Concentric), color mode toggle (community vs entity type); CommunityPanel component at `/frontend/components/CommunityPanel.tsx` showing community details (title, summary, member count, relationship count, type distribution bars, key entities, member list); SafeCommunityVisualization wrapper with error boundary; Navigation link to Communities page; Statistics cards for community count, total members, avg size, modularity; Generate/Regenerate community summaries integration; 64 unit tests at `/frontend/components/__tests__/CommunityVisualization.test.tsx` and `/frontend/components/__tests__/CommunityPanel.test.tsx` |
| 1.70 | 2026-01-25 | Completed F3.3.5 (Impact Visualization) - Interactive dependency tree and impact visualization at `/frontend/components/ImpactVisualization.tsx` using Cytoscape.js; 3 layout modes (radial/tree/force-directed); color-coded nodes by impact score (red=critical >=0.8, orange=high 0.6-0.8, yellow=medium 0.4-0.6, green=low <0.4) or entity type; node size scales with impact score; upstream (circular shape, dashed blue edges) vs downstream (rounded rectangle, solid red edges) differentiation; view mode toggle (both/upstream/downstream); interactive hover highlighting with connected node emphasis; summary panel showing source entity, upstream/downstream counts, critical count, risk level badge; selected node details panel with name, type, direction, impact score, distance; simulation results panel showing direct/indirect/critical impact counts and recommendation; zoom/pan/reset controls; show labels toggle; comprehensive legend (direction, impact score, node size, metadata); Dashboard page at `/frontend/app/dashboard/impact/page.tsx` with entity search autocomplete, direction selector, max depth control, analyze impact and simulate removal buttons, quick stats cards, type distribution grid, critical entities table with impact score bars; Navigation link added to sidebar; 48 unit tests at `/frontend/components/__tests__/ImpactVisualization.test.tsx` |
| 1.71 | 2026-01-26 | Integration Audit and Fixes - Comprehensive integration verification across all 106 features. Fixed: (1) Persona parameters (persona, filterByPersona, lazySummaries) now passed to /api/graphrag/query endpoint (F6.3.2-F6.3.4, F6.2.5); (2) Latency budget middleware (F5.2.5) now applied globally via latencyBudgetMiddleware(); (3) SharePoint Connector API routes added at /api/sharepoint/* matching ADLS pattern (F4.2.1); (4) Missing evaluators exported from evaluation/index.js (community-summary-evaluator, lazy-vs-eager-comparison, negative-test-evaluator, adversarial-evaluator, security-bypass-evaluator); (5) Prompt injection protection expanded to /api/graphrag/search, /api/graphrag/answer, /api/graphrag/global-query, /api/graphrag/temporal/query, /api/graphrag/temporal/answer (F5.3.2); (6) Fixed Express route wildcard pattern for /api/adls/connectors/:connectorId/documents/*documentPath; Updated Swagger docs for all modified endpoints |
